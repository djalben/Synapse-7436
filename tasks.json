[{"description": "Build 'Synapse' - a premium AI Platform with a Vercel/Runable inspired dark aesthetic.\n\nDesign System:\n- Dark mode only with pure black (#000000) background\n- Subtle borders using #333\n- Glassmorphism effects with backdrop blur\n- Font: Geist Mono for headings, Inter for body text\n- Accent color: Electric Indigo/Blue gradient\n\nLayout Structure:\n\n1. LEFT SIDEBAR (fixed, ~240px wide):\n   - Top: 'Synapse' logo/branding with subtle glow effect\n   - Navigation tabs with Lucide React icons:\n     - 'Chat' (MessageSquare icon) - selected by default\n     - 'Image Studio' (Image icon)\n     - 'Motion Lab' (Video icon)\n     - 'History' (Clock icon)\n     - 'Settings' (Settings icon)\n   - Each nav item should have hover states with subtle background\n   - Bottom of sidebar: 'Upgrade Plan' button with gradient border/glow effect\n\n2. MAIN CONTENT AREA (Chat Interface as default view):\n   \n   TOP BAR:\n   - Sleek model selector dropdown on the left\n   - Show model options with provider logos:\n     - 'GPT-4o' with OpenAI logo\n     - 'Claude 3.5 Sonnet' with Anthropic logo  \n     - 'DeepSeek V3' with DeepSeek logo\n   - Dropdown should have glassmorphism styling\n   \n   CENTER (Empty State):\n   - Welcoming text: 'What can I help you create today?'\n   - Subtle animation or gradient text effect\n   - Maybe suggestion chips below for common actions\n   \n   BOTTOM (Input Area):\n   - Premium input field with dark glass effect\n   - Left: Attachment button (Paperclip icon)\n   - Right: Voice input icon (Mic icon) and Send button\n   - Subtle border glow on focus\n   - Placeholder text: 'Message Synapse...'\n\nOverall feel: Premium, minimal, expensive - like a high-end SaaS product. Use subtle gradients, smooth transitions, and refined spacing.", "type": "feature", "passes": true, "id": 1}, {"description": "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –∑–∞–¥–Ω–∏–π —Ñ–æ–Ω –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –≤–∏–¥–µ–æ –ø–æ —Ç–µ–º–µ AI/—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –í–∏–¥–µ–æ –¥–æ–ª–∂–Ω–æ:\n- –ë—ã—Ç—å –∑–∞—Ü–∏–∫–ª–µ–Ω–Ω—ã–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –±–µ–∑ –∑–≤—É–∫–∞\n- –ò–º–µ—Ç—å –Ω–∏–∑–∫—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (opacity ~10-15%) —á—Ç–æ–±—ã –Ω–µ –æ—Ç–≤–ª–µ–∫–∞—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞\n- –ü–æ–∫—Ä—ã–≤–∞—Ç—å –≤–µ—Å—å —ç–∫—Ä–∞–Ω (full-screen cover)\n- –ë—ã—Ç—å —Ä–∞–∑–º—ã—Ç—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞\n\n–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Ç–µ–º—É: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏, AI –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, —Ü–∏—Ñ—Ä–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã, –∏–ª–∏ —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ —Å–∏–Ω–∏—Ö/—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã—Ö —Ç–æ–Ω–∞—Ö.", "type": "feature", "passes": true, "id": 2}, {"description": "–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–∫–æ–π–Ω—ã–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∑–∞–¥–Ω–∏–π —Ñ–æ–Ω –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:\n\n1. –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ —à–∞—Ä—ã/–±–ª–æ–±—ã (2-3 —à—Ç—É–∫–∏):\n   - –ë–æ–ª—å—à–∏–µ —Ä–∞–∑–º—ã—Ç—ã–µ –∫—Ä—É–≥–∏ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ indigo/blue/purple\n   - –ú–µ–¥–ª–µ–Ω–Ω–æ –ø–ª–∞–≤–∞—é—Ç –∏ –ø—É–ª—å—Å–∏—Ä—É—é—Ç\n   - –ù–∏–∑–∫–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (10-20%)\n\n2. –°–µ—Ç–∫–∞ –∏–ª–∏ —Ç–æ—á–µ—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:\n   - –¢–æ–Ω–∫–∞—è —Å–µ—Ç–∫–∞ –∏–ª–∏ —Ç–æ—á–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ\n   - –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (5-10%)\n   - –°–æ–∑–¥–∞–µ—Ç –≥–ª—É–±–∏–Ω—É\n\n3. –≠—Ñ—Ñ–µ–∫—Ç —á–∞—Å—Ç–∏—Ü –∏–ª–∏ –∑–≤–µ–∑–¥:\n   - –ú–∞–ª–µ–Ω—å–∫–∏–µ –º–µ—Ä—Ü–∞—é—â–∏–µ —Ç–æ—á–∫–∏\n   - –ú–µ–¥–ª–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—é—Ç—Å—è –∏–ª–∏ –º–µ—Ä—Ü–∞—é—Ç\n   - –°–æ–∑–¥–∞—é—Ç –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π/—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç\n\n4. –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ:\n   - –ú—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –∏–ª–∏ —É–≥–ª–æ–≤\n   - –í —Å–∏–Ω–∏—Ö/—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã—Ö —Ç–æ–Ω–∞—Ö\n   - –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (–¥—ã—Ö–∞–Ω–∏–µ)\n\n–í—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–ø–æ–∫–æ–π–Ω—ã–º, –Ω–µ –æ—Ç–≤–ª–µ–∫–∞—é—â–∏–º, –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º. –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π - —Ç–æ–ª—å–∫–æ –ø–ª–∞–≤–Ω—ã–µ, –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏.", "type": "feature", "passes": true, "id": 3}, {"description": "Build the 'Motion Lab' page - a Video Generation Interface that appears when clicking 'Motion Lab' in the sidebar.\n\n**Navigation:**\n- Make the sidebar navigation functional - clicking tabs switches the main content view\n- 'Chat' shows the current chat interface\n- 'Motion Lab' shows the new video generation interface\n- Other tabs can show placeholder content for now\n\n**Motion Lab Layout:** Two-column split view\n\n**LEFT PANEL (Controls) - ~40% width:**\n1. Prompt Area:\n   - Large textarea with placeholder \"Describe your video...\"\n   - Glassmorphism styling matching the chat input\n   - Character count indicator\n\n2. Image Upload Section:\n   - Dropzone box with dashed border\n   - Icon and text \"Upload Reference Image\"\n   - Subtitle \"For Image-to-Video generation\"\n   - Hover effect with border glow\n\n3. Settings Accordion/Collapsible sections:\n   - Duration: Slider or toggle buttons for 5s, 10s\n   - Aspect Ratio: Selector buttons for 16:9, 9:16, 1:1 with visual previews\n   - Motion Scale: Slider from 1 to 10 with labels (Subtle to Dynamic)\n\n4. Generate Button:\n   - Large prominent button \"Generate Video\"\n   - Electric blue/indigo gradient\n   - Glowing effect on hover\n   - Full width of the panel\n\n**RIGHT PANEL (Preview & History) - ~60% width:**\n1. Main Video Player:\n   - Large placeholder area for video preview\n   - Dark background with subtle border\n   - Play button overlay in center\n   - Shows \"Your video will appear here\" when empty\n\n2. Recent Generations Grid:\n   - Section title \"Recent Generations\"\n   - Grid of 4-6 thumbnail placeholders\n   - Each thumbnail has duration badge, hover effect\n   - Use dummy/placeholder data\n\n**Style:**\n- Same premium dark theme (#000000 background)\n- Glassmorphism for both panels\n- Consistent with existing Synapse design\n- Smooth transitions when switching views", "type": "feature", "passes": true, "id": 4}, {"description": "Build the 'Image Studio' page - a specialized Image Generation Interface that appears when clicking 'Image Studio' in the sidebar.\n\n**Layout:** Split View (Left Controls ~35%, Right Gallery ~65%)\n\n**LEFT PANEL (Controls):**\n\n1. Header:\n   - \"Image Studio\" title\n   - Subtitle describing the feature\n\n2. Prompt Area:\n   - Large textarea with placeholder \"Describe your image...\"\n   - Glassmorphism styling\n   - Character count indicator\n\n3. Style Selector (Grid of 4 selectable cards):\n   - 'Photorealistic' with Camera icon\n   - 'Anime/Manga' with Sparkle icon\n   - '3D Render' with Box icon\n   - 'Cyberpunk' with Zap icon\n   - Cards should be selectable (one at a time)\n   - Selected card has glowing border and gradient background\n   - 2x2 grid layout\n\n4. Aspect Ratio:\n   - Three toggle buttons: 1:1 (Square), 16:9 (Landscape), 9:16 (Portrait)\n   - Visual aspect ratio preview icons\n   - Selected state with gradient styling\n\n5. Number of Images:\n   - Slider from 1 to 4\n   - Show current value prominently\n   - Labels showing min/max\n\n6. Generate Button:\n   - \"Generate Images\" text\n   - Full width, electric blue/indigo gradient\n   - Glowing effect on hover\n   - Shimmer animation\n\n**RIGHT PANEL (Gallery):**\n\n1. Header with \"Gallery\" title and image count\n\n2. Masonry Grid (Pinterest-style layout):\n   - Use CSS columns or masonry layout\n   - Display 8-10 dummy placeholder images\n   - Images of varying heights to show masonry effect\n   - Use placeholder images (abstract art, nature, tech, portraits, cityscapes)\n   - Different aspect ratios mixed together\n\n3. Image Hover Effects:\n   - Darken overlay on hover\n   - Show action buttons: 'Download' (download icon) and 'Upscale' (expand icon)\n   - Smooth fade-in transition\n   - Buttons have glassmorphism styling\n\n4. Each image card should have:\n   - Rounded corners\n   - Subtle border\n   - Smooth hover scale effect\n\n**Style:**\n- Same premium dark theme (#000000 background)\n- Glassmorphism for panels\n- Consistent indigo/blue accents\n- Smooth animations and transitions", "type": "feature", "passes": true, "id": 5}, {"description": "Make the Chat interface fully functional with OpenRouter API integration and streaming.\n\n**1. Backend API Route (`/api/chat`):**\n- Create a Next.js API route at `/api/chat`\n- Accept POST requests with JSON body: `{ messages, model }`\n- Messages format: array of `{ role: 'user' | 'assistant', content: string }`\n- Forward requests to `https://openrouter.ai/api/v1/chat/completions`\n- Use `OPENROUTER_API_KEY` environment variable for Authorization header (Bearer token)\n- Enable streaming responses (stream: true)\n- Return the streamed response to the frontend\n- Handle errors gracefully\n\n**2. Frontend Chat Integration:**\n- Connect the chat input to the `/api/chat` endpoint\n- When user submits a message:\n  - Add user message to the chat history\n  - Show the message in the UI immediately\n  - Send request to backend with messages array and selected model\n  - Display AI response streaming in real-time (character by character)\n  - Add completed response to chat history\n- Show loading/typing indicator while waiting for response\n- Handle errors and show error messages\n- Clear input after sending\n- Auto-scroll to latest message\n\n**3. Model Mapping:**\n- Map dropdown selection to OpenRouter model IDs:\n  - 'GPT-4o' ‚Üí 'openai/gpt-4o'\n  - 'Claude 3.5 Sonnet' ‚Üí 'anthropic/claude-3.5-sonnet'\n  - 'DeepSeek V3' ‚Üí 'deepseek/deepseek-chat'\n- Pass the mapped model ID to the API\n\n**4. Chat UI Updates:**\n- Display message bubbles for user and assistant\n- User messages on the right, assistant on the left\n- Different styling for each (user: indigo gradient, assistant: dark glass)\n- Show model name/icon next to assistant messages\n- Typing indicator with animated dots while streaming\n- Markdown rendering for assistant responses (code blocks, bold, etc.)\n\n**5. State Management:**\n- Store chat messages in React state\n- Persist selected model in state\n- Handle empty state vs active conversation", "type": "feature", "passes": true, "id": 6}, {"description": "Make the Image Studio functional with OpenRouter image generation API.\n\n**1. Backend API Route (`/api/image`):**\n- Create a new API route at `/api/image`\n- Accept POST requests with JSON body: `{ prompt, aspectRatio, numImages }`\n- Send request to OpenRouter's OpenAI-compatible image endpoint: `https://openrouter.ai/api/v1/images/generations`\n- Use model: `black-forest-labs/flux-1-schnell` (important: not DALL-E)\n- Use `OPENROUTER_API_KEY` environment variable for Authorization (Bearer token)\n- Map aspect ratios to size parameters:\n  - 1:1 ‚Üí 1024x1024\n  - 16:9 ‚Üí 1024x576 (or similar landscape)\n  - 9:16 ‚Üí 576x1024 (or similar portrait)\n- Return the generated image URL(s) to the frontend\n- Handle errors gracefully with proper error messages\n\n**2. Frontend Image Studio Integration:**\n- Connect the \"Generate Images\" button to `/api/image` endpoint\n- When user clicks generate:\n  - Validate that prompt is not empty\n  - Show loading spinner on the button\n  - Disable the button during generation\n  - Change button text to \"Generating...\" with spinner\n- On success:\n  - Add the new image(s) to the gallery grid at the top\n  - Show success feedback\n- On error:\n  - Show error message to user\n  - Re-enable the button\n\n**3. Gallery Updates:**\n- Store generated images in React state\n- New images appear at the top of the masonry grid\n- Each image shows:\n  - The actual generated image\n  - Hover overlay with Download and Upscale buttons\n  - Click to view full size in a modal/lightbox\n\n**4. Lightbox/Modal:**\n- When user clicks an image, show it full size in a modal\n- Dark overlay background\n- Close button (X) in corner\n- Click outside to close\n- Show the prompt used below the image", "type": "feature", "passes": true, "id": 7}, {"description": "Implement a Usage Limit and Paywall system to monetize the app.\n\n**1. Usage Tracking (localStorage):**\n- Track `messageCount` for chat messages used\n- Track `imageCount` for image generations used\n- Store in localStorage so it persists across sessions\n- Initialize to 0 if not present\n- Increment after each successful API call\n\n**2. Free Tier Limits:**\n- Chat Messages: 5 max for free users\n- Image Generations: 2 max for free users\n- Check limits BEFORE making any API call\n- If limit reached, block the action completely\n\n**3. Paywall Modal:**\n- Show when user tries to exceed limits\n- Block the action - don't allow API call\n- Modal Design:\n  - Title: \"Unlock Unlimited Power üöÄ\"\n  - Subtitle explaining why they're seeing this\n  - Three pricing cards side by side:\n    \n    **Starter ($5/month):**\n    - 50 Chat messages\n    - 10 Image generations\n    - Basic models\n    \n    **Pro ($15/month) - Highlighted/Recommended:**\n    - Unlimited Chat messages\n    - 50 Image generations\n    - All AI models\n    - Priority support\n    \n    **Studio ($30/month):**\n    - Unlimited everything\n    - Video generation (Motion Lab)\n    - API access\n    - Priority support\n    - Early access to new features\n  \n  - Each card has checkmarks for features\n  - \"Subscribe\" button on each card (dummy - just shows a toast/alert saying \"Coming soon\")\n  - Close button (X) to dismiss modal\n  - Premium glassmorphism styling\n\n**4. UI Feedback:**\n- Add \"Credits\" section in the sidebar above the \"Upgrade Plan\" button\n- Show: \"3/5 Free messages\" and \"1/2 Free images\"\n- Progress bar or visual indicator\n- When credits are low (1 remaining), show in orange/warning color\n- When credits are exhausted, show in red\n\n**5. Modal Behavior:**\n- When paywall appears, blur the background slightly\n- Modal should be centered with dark overlay\n- Animate in smoothly\n- Cannot be bypassed - must close modal to continue\n- \"Upgrade Plan\" button in sidebar also opens this modal\n\n**6. Integration:**\n- Wrap the chat send function to check limits first\n- Wrap the image generate function to check limits first\n- Show appropriate error if limit reached", "type": "feature", "passes": true, "id": 8}, {"description": "**Phase 1: Upgrade Image Studio with Reference Image Upload and Image-to-Image mode**\n\n**UI Changes (Left Panel):**\n\n1. Add \"Upload Reference Image\" section:\n   - Drag-and-drop zone for JPG/PNG uploads\n   - Shows image preview when uploaded\n   - Remove button to clear the image\n   - Dashed border, icon, and helpful text\n   - Glow effect on hover/drag\n\n2. Add \"Mode\" toggle below the upload:\n   - Two options: \"Text-to-Image\" (default) and \"Image-to-Image\"\n   - When Image-to-Image is selected, the reference image upload becomes required\n   - Visual toggle buttons with icons\n   - Text-to-Image uses prompt only\n   - Image-to-Image uses prompt + reference image to style/transform the photo\n\n3. Update the prompt placeholder based on mode:\n   - Text-to-Image: \"Describe your image...\"\n   - Image-to-Image: \"Describe how to transform this image...\" or \"as a cyberpunk character, anime style, etc.\"\n\n**Backend Logic (`/api/image`):**\n\n1. Update API to handle file uploads:\n   - Accept multipart/form-data\n   - Parse image file from the request\n   - Also accept prompt, aspectRatio, style, numImages as form fields\n\n2. Image-to-Image processing:\n   - If an image is uploaded, use image-to-image generation\n   - Use a model that supports img2img (like flux or similar)\n   - Send the base64 image along with the prompt\n   - Goal: User uploads a selfie, adds prompt \"as a cyberpunk character\" and gets styled output\n\n3. Keep Text-to-Image working as before when no image is uploaded\n\n**Integration:**\n- Paywall still applies (counts as image generation)\n- Premium dark UI maintained\n- Smooth transitions between modes", "type": "feature", "passes": true, "id": 9}, {"description": "**Phase 2: Upgrade Motion Lab with Image-to-Video capabilities**\n\n**UI Changes (Left Panel):**\n\n1. Make \"Upload Reference Image\" more prominent:\n   - Larger dropzone area\n   - Label: \"Animate Your Photo\"\n   - Subtitle: \"Upload a photo to bring it to life\"\n   - Icon showing photo-to-video transformation\n\n2. Add \"Mode\" toggle:\n   - Two options: \"Text-to-Video\" (default) and \"Image-to-Video\"\n   - Visual toggle buttons similar to Image Studio\n   - When Image-to-Video is selected:\n     - Reference image upload becomes required/highlighted\n     - Prompt placeholder changes to \"Describe the motion...\"\n   - When Text-to-Video is selected:\n     - Reference image is optional\n     - Prompt placeholder: \"Describe your video...\"\n\n3. Update prompt placeholders based on mode:\n   - Text-to-Video: \"Describe your video scene...\"\n   - Image-to-Video: \"Describe how to animate this photo...\" (e.g., \"make them smile and wave\")\n\n**Backend Logic (`/api/video`):**\n\n1. Create new API route at `/api/video`:\n   - Accept multipart/form-data\n   - Fields: prompt, duration, aspectRatio, motionScale, mode, image (optional)\n\n2. Text-to-Video mode:\n   - Use a text-to-video model via OpenRouter/Replicate\n   - Generate video from prompt only\n\n3. Image-to-Video mode:\n   - Use an image-to-video model (Luma, Kling, Runway, or similar)\n   - Pass the uploaded image + prompt\n   - Generate 5-10 second animation\n   - Return video URL to frontend\n\n4. Frontend integration:\n   - Show loading state during generation (videos take longer)\n   - Display generated video in the preview player on the right\n   - Add to recent generations grid\n   - Video playback controls\n\n**Integration:**\n- Paywall applies: Image-to-Video counts as a generation\n- Add video generation tracking to usage context if needed\n- Premium dark UI maintained\n- Smooth mode switching", "type": "feature", "passes": true, "id": 10}, {"description": "**Mobile Responsiveness - Critical UI Updates**\n\n**1. Sidebar - Mobile Navigation:**\n- On screens smaller than 768px (md breakpoint), HIDE the fixed sidebar completely\n- Add a \"Hamburger Menu\" button (Menu icon) in the top-left corner of the main content area\n- When hamburger is clicked, slide out a navigation drawer from the left side\n- Use a Sheet/Drawer component with slide animation\n- Drawer contains all sidebar content: logo, navigation tabs, credits, upgrade button\n- Close drawer when a nav item is clicked\n- Dark overlay behind drawer when open\n- Swipe to close gesture support if possible\n\n**2. Top Bar - Mobile:**\n- On mobile, show hamburger menu button on the left\n- Model selector in the center or right\n- Compact layout for small screens\n\n**3. Image Studio - Mobile Layout:**\n- On mobile (< 768px), stack panels vertically instead of side-by-side\n- Controls panel on top (full width)\n- Gallery/Results below (full width)\n- Make all touch targets at least 44px (iOS recommendation)\n- Larger buttons and inputs for touch\n- Collapsible sections to save space\n\n**4. Motion Lab - Mobile Layout:**\n- Same vertical stacking approach\n- Controls on top, Preview/Results below\n- Large touch-friendly buttons\n- Scrollable layout\n\n**5. Chat Interface - Mobile:**\n- Full width messages\n- Input area fixed at bottom\n- Keyboard-aware layout\n- Large send button for touch\n\n**6. General Mobile Optimizations:**\n- Minimum font-size 16px on inputs (prevents iOS zoom)\n- Touch-friendly spacing throughout\n- No hover-only interactions (provide tap alternatives)\n- Smooth scrolling", "type": "feature", "passes": true, "id": 11}, {"description": "**PWA (Progressive Web App) Setup**\n\n**1. Manifest Configuration:**\n- Create/configure manifest.json (or web manifest in Next.js)\n- Name: \"Synapse AI\"\n- Short Name: \"Synapse\"\n- Description: \"Premium AI Platform for Chat, Image & Video Generation\"\n- Theme Color: #000000\n- Background Color: #000000\n- Display: \"standalone\" (removes browser URL bar)\n- Orientation: \"any\"\n- Start URL: \"/\"\n- Icons: Generate/add app icons in multiple sizes (192x192, 512x512)\n- Add proper meta tags in head for PWA support\n\n**2. iOS Specific Meta Tags:**\n- apple-mobile-web-app-capable: yes\n- apple-mobile-web-app-status-bar-style: black-translucent\n- apple-mobile-web-app-title: Synapse\n- Add apple-touch-icon\n\n**3. Install Prompt Banner:**\n- Detect if user is on mobile AND not in standalone mode\n- Show a dismissible banner at the bottom of the screen\n- Text: \"Install Synapse for a better experience üì≤\"\n- \"Install\" button that triggers the browser's install prompt (beforeinstallprompt event)\n- \"Dismiss\" button (X) to hide the banner\n- Remember dismissal in localStorage (don't show again for a while)\n- Animate banner in from bottom\n- Glassmorphism styling matching the app\n\n**4. iOS Rubber-banding Prevention:**\n- Add CSS to prevent overscroll/bounce effect\n- overflow: hidden on html/body when needed\n- overscroll-behavior: none on scrollable containers\n- touch-action: manipulation on interactive elements\n\n**5. Additional PWA Optimizations:**\n- Viewport meta tag with viewport-fit=cover\n- Disable user scaling on inputs: user-scalable=no or minimum-scale=1\n- Safe area insets for notched devices (env(safe-area-inset-*))\n- Service worker for offline support (optional but nice to have)", "type": "feature", "passes": true, "id": 12}, {"description": "**Upgrade Motion Lab for \"Bring Photos to Life\" trend - Magical, Easy-to-Use UI**\n\n**Design Philosophy:**\n- Make it feel magical for non-technical users\n- Minimal cognitive load - just upload and pick a preset\n- Visual, fun, approachable interface\n\n**UI Changes (Motion Lab - Complete Redesign of Left Panel):**\n\n**1. Default State - Large Upload Focus:**\n- Big, prominent \"Upload Portrait Photo\" dropzone as the hero element\n- Large icon (sparkles + image icon) in the center\n- Friendly text: \"Upload a portrait to bring it to life ‚ú®\"\n- Subtitle: \"Works best with front-facing photos\"\n- Drag & drop support with visual feedback\n- Supported formats note (JPG, PNG)\n- Glow effect on hover, magical feel\n\n**2. After Photo Upload - Show Animation Presets:**\n- HIDE the generic text prompt textarea completely\n- Show uploaded photo preview (medium size, centered)\n- Below the preview, show \"Choose Animation\" label\n- Display a grid of 4 **Animation Preset** buttons:\n\n  **Preset Cards (2x2 grid):**\n  - üü¶ **\"Smile & Blink\"** - Blue accent\n    - Icon: Smile face\n    - Description: \"Gentle smile, natural blinks\"\n  \n  - üü© **\"Wave Hello\"** - Green accent  \n    - Icon: Hand wave\n    - Description: \"Friendly wave to camera\"\n  \n  - üü™ **\"Look Around\"** - Purple accent\n    - Icon: Eye/arrows\n    - Description: \"Natural head movement\"\n  \n  - üüß **\"Old Film\"** - Orange/sepia accent\n    - Icon: Film reel\n    - Description: \"Vintage film effect\"\n\n  - Each preset card should be visually distinct with its color\n  - Selected state with glow border\n  - Hover animation (slight lift)\n\n**3. Simplified Settings:**\n- Only show Duration toggle: 5s (default, highlighted) and 10s\n- Hide Motion Scale, aspect ratio, and other complex settings\n- Keep it dead simple\n\n**4. Generate Button:**\n- Large \"‚ú® Bring to Life\" button (not \"Generate Video\")\n- Magical gradient animation\n- Disabled until photo + preset selected\n- Loading state: \"Creating magic...\" with sparkle animation\n\n**5. Change Photo Option:**\n- Small \"Change photo\" link below the preview\n- Allows re-uploading different image\n\n**6. Tips/Helper Text:**\n- Small tips like \"Tip: Front-facing portraits work best!\"\n- Non-intrusive, helpful guidance\n\n**Right Panel Updates:**\n- Keep the video preview player\n- Update empty state text: \"Your animated portrait will appear here\"\n- Recent generations show the animation type used", "type": "feature", "passes": true, "id": 13}, {"description": "**Backend: Create dedicated `/api/video/animate` endpoint for portrait animation**\n\n**API Route (`/api/video/animate`):**\n\n1. Accept POST with multipart/form-data:\n   - `image`: The uploaded portrait photo (required)\n   - `preset`: The animation preset chosen (smile-blink, wave-hello, look-around, old-film)\n   - `duration`: 5 or 10 seconds\n\n2. **Preset to Prompt Mapping:**\n   Construct detailed, specific prompts based on preset:\n\n   - **smile-blink**: \n     \"A photorealistic video of this person, they slowly form a warm, genuine smile while looking at the camera, natural eye blinking every few seconds, subtle head micro-movements, soft lighting, cinematic quality, 5 seconds, smooth motion\"\n\n   - **wave-hello**:\n     \"A photorealistic video of this person, they raise their right hand and wave hello to the camera with a friendly expression, natural arm movement, slight head tilt, warm smile, lifelike motion, 5 seconds\"\n\n   - **look-around**:\n     \"A photorealistic video of this person, they naturally look to the left then slowly turn to look to the right, subtle head movement, curious expression, natural eye movement, realistic motion, 5 seconds\"\n\n   - **old-film**:\n     \"A vintage old film effect video of this person, subtle movement, slight smile, film grain texture, sepia tones, film flicker effect, nostalgic 1920s silent film aesthetic, slow deliberate movements, 5 seconds\"\n\n3. **Integration:**\n   - Use OpenRouter or similar to call an Image-to-Video model\n   - Pass the image + constructed prompt\n   - Handle the response and return video URL\n   - Proper error handling with user-friendly messages\n\n4. **Usage Tracking:**\n   - This counts toward video generation limits\n   - Check paywall before processing\n   - Increment video count on success\n\n5. **Response:**\n   - Return video URL/data\n   - Include preset used and duration for display", "type": "feature", "passes": true, "id": 14}, {"description": "**Image Studio UI Update - Add \"Enhance Photo\" Mode (Remini-Killer Features)**\n\n**1. Mode Switcher at Top of Left Panel:**\n- Add a prominent mode toggle at the very top\n- Two modes: **[Generate New]** vs **[Enhance Photo]**\n- Styled as pill/tab buttons with smooth transition\n- \"Generate New\" shows current generation interface\n- \"Enhance Photo\" shows the new enhancement interface\n\n**2. \"Enhance Photo\" Mode Interface:**\n\n*Upload Zone:*\n- Large, prominent upload dropzone\n- Text: \"Upload a photo to enhance\"\n- Subtitle: \"Works with blurry, old, or B&W photos\"\n- Show preview after upload with \"Change photo\" option\n- Magical styling with glow effects\n\n*Magic Tools Section (after photo uploaded):*\n- Label: \"Choose Enhancement\"\n- 3 beautiful tool cards in a column or grid:\n\n  **üßô‚Äç‚ôÇÔ∏è Face Restore (Unblur)**\n  - Icon: Wand/magic icon\n  - Description: \"Fix blurry faces and enhance details\"\n  - Blue accent color\n  - Badge: \"AI Powered\"\n\n  **üé® Colorize**\n  - Icon: Palette/color icon  \n  - Description: \"Turn B&W photos into vivid color\"\n  - Rainbow/gradient accent\n  - Badge: \"Classic Photos\"\n\n  **‚ú® Beauty Retouch**\n  - Icon: Sparkles/star icon\n  - Description: \"Smooth skin, fix lighting, pro finish\"\n  - Pink/purple accent\n  - Badge: \"Portrait Pro\"\n\n- Cards are selectable (one at a time)\n- Selected card has glowing border\n- Hover animations\n\n*Action Button:*\n- Large \"Enhance Photo ‚ö°\" button\n- Gradient styling, glow effect\n- Disabled until photo + tool selected\n- Loading state: \"Enhancing...\" with animation\n\n*Credits Note:*\n- Small text: \"Uses 2 credits per enhancement\"\n- Show current credits remaining\n\n**3. Right Panel - Results with Before/After Slider:**\n- When enhancement completes, show the Before/After comparison\n- NOT just the result image alone\n- Interactive slider component (see next task)\n\n**4. Keep Generate New Mode:**\n- All existing generation features remain when \"Generate New\" is selected\n- Smooth transition between modes", "type": "feature", "passes": true, "id": 15}, {"description": "**Before/After Slider Component - The \"Wow\" Factor**\n\n**Create a stunning comparison slider component:**\n\n1. **Layout:**\n- Two images stacked: original (before) and enhanced (after)\n- Draggable divider/handle in the middle\n- Handle styled as a vertical line with a circular grab point\n- Premium glassmorphism styling on handle\n\n2. **Interaction:**\n- User can drag handle left/right\n- Reveals more of \"after\" image as you drag right\n- Reveals more of \"before\" image as you drag left\n- Smooth, fluid dragging with no lag\n- Touch support for mobile (drag with finger)\n- Initial position: 50% (middle)\n\n3. **Visual Design:**\n- \"Before\" label on left side (subtle, doesn't obstruct)\n- \"After\" label on right side\n- Handle has arrows (< >) indicating drag direction\n- Subtle shadow on the divider line\n- Glow effect on the handle\n\n4. **Responsive:**\n- Works on mobile with touch drag\n- Maintains aspect ratio of images\n- Smooth performance\n\n5. **Integration:**\n- Component receives `beforeImage` and `afterImage` props\n- Used in Image Studio when enhancement is complete\n- Can also show download buttons for both/either image", "type": "feature", "passes": true, "id": 16}, {"description": "**Backend: Create `/api/enhance` endpoint for photo enhancement**\n\n**API Route (`/api/enhance`):**\n\n1. Accept POST with:\n   - `image`: Base64 or file upload of source image\n   - `tool`: Enhancement tool selected (face-restore, colorize, beauty-retouch)\n\n2. **Tool-Specific Processing:**\n\n   **face-restore:**\n   - Use a face restoration model (CodeFormer-style)\n   - Prompt/approach: Enhance facial details, fix blur, sharpen eyes\n   - Via OpenRouter or Replicate API\n   - Best for: blurry selfies, old photos with unclear faces\n\n   **colorize:**\n   - Use a colorization model (DeOldify-style)\n   - Automatically detect and colorize B&W images\n   - Realistic, historically accurate colors\n   - Via Replicate API or similar\n\n   **beauty-retouch:**\n   - Use image-to-image with low strength (0.3-0.4)\n   - Prompt: \"High-end professional beauty retouch, flawless skin texture, soft studio lighting, subtle skin smoothing, natural look, 8k quality, professional headshot\"\n   - Keeps strong resemblance to original\n   - Via OpenRouter flux-1-dev or similar\n\n3. **Response:**\n   - Return both original image URL and enhanced image URL\n   - Include tool used and processing time\n   - Proper error handling\n\n4. **Usage/Paywall:**\n   - Check credits before processing\n   - Deduct 2 credits per enhancement (premium feature)\n   - Return error if insufficient credits\n\n5. **Integration Notes:**\n   - For Replicate models, use REPLICATE_API_TOKEN env var if available\n   - Fallback to OpenRouter image models if Replicate unavailable\n   - Handle API timeouts gracefully (these can take 10-30 seconds)", "type": "feature", "passes": true, "id": 17}, {"description": "**Image Studio: Add \"Enhance Photo\" Mode (Remini-Killer Features)**\n\n**1. Mode Switcher at Top of Left Panel:**\n- Add a prominent mode switcher: **[Generate New]** vs **[Enhance Photo]**\n- Styled as tabs or toggle buttons\n- \"Generate New\" is the current functionality (default)\n- \"Enhance Photo\" switches to restoration/enhancement tools\n\n**2. When \"Enhance Photo\" is Selected - New UI:**\n\n*Upload Zone:*\n- Large, prominent upload area\n- Text: \"Upload a photo to enhance\"\n- Subtitle: \"Works with blurry, old, or B&W photos\"\n- Drag & drop with preview\n\n*Magic Tools (3 Selectable Cards):*\n- Grid of 3 enhancement tool cards:\n\n  üßô‚Äç‚ôÇÔ∏è **Face Restore (Unblur)**\n  - Icon: Wand/sparkles\n  - Description: \"Fix blurry faces and eyes\"\n  - Blue accent\n\n  üé® **Colorize**\n  - Icon: Palette/color drops\n  - Description: \"Turn B&W photos to color\"\n  - Rainbow/gradient accent\n\n  ‚ú® **Beauty Retouch**\n  - Icon: Sparkle/star\n  - Description: \"Smooth skin, fix lighting\"\n  - Pink/purple accent\n\n- Cards are selectable (one at a time)\n- Selected state with glow border\n- Each shows expected result type\n\n*Action Button:*\n- \"Enhance Photo ‚ö°\" with gradient\n- Disabled until photo uploaded + tool selected\n- Loading state: \"Enhancing...\" with magic animation\n\n**3. Before/After Slider Component:**\n- When enhancement result returns, show a Before/After comparison\n- Draggable slider handle in the middle\n- Drag left/right to reveal enhanced version over original\n- Smooth, responsive interaction\n- Labels: \"Before\" on left, \"After\" on right\n- This is THE wow factor - crucial for showing improvement\n- Premium glassmorphism styling\n\n**4. Gallery Integration:**\n- Enhanced photos appear in the gallery\n- Badge showing which tool was used\n- Can click to see full before/after comparison\n\n**5. Credits:**\n- Enhancement costs 2 credits per use\n- Show \"2 credits\" badge on the enhance button\n- Update usage tracking", "type": "feature", "passes": true, "id": 18}, {"description": "**Backend: Create `/api/enhance` endpoint for photo enhancement**\n\n**API Route:**\n- Accept POST with: `{ image (base64), tool (face-restore | colorize | beauty-retouch) }`\n\n**Tool-Specific Logic:**\n\n1. **Face Restore (face-restore):**\n   - Use a face restoration model\n   - Prompt context: \"Restore and enhance facial details, fix blur, sharpen eyes, high quality restoration\"\n   - Returns enhanced face image\n\n2. **Colorize (colorize):**\n   - Use colorization model or multimodal with specific prompt\n   - Prompt: \"Colorize this black and white photo with natural, realistic colors, maintain original composition and details\"\n   - Returns colorized image\n\n3. **Beauty Retouch (beauty-retouch):**\n   - Use image-to-image with subtle transformation\n   - Prompt: \"High-end beauty retouch, detailed skin texture, professional lighting, 8k quality, subtle enhancement, keep original features\"\n   - Low strength/influence to maintain resemblance\n   - Returns retouched image\n\n**Response:**\n- Return both original and enhanced image URLs/data\n- Include tool used and metadata\n- For Before/After slider to work\n\n**Usage:**\n- Deduct 2 image credits per enhancement\n- Check paywall before processing", "type": "feature", "passes": true, "id": 19}, {"description": "**Image Studio: Add \"Specialized Engines\" Section with Niji Anime V6**\n\n**UI Addition (in Generate New mode):**\n\n1. Below the Style selector grid, add a new section:\n   - Section label: \"Specialized Engines\"\n   - Divider line above\n\n2. Add a premium button/card:\n   - **\"‚ú® Niji Anime V6\"** button\n   - Gold/yellow gradient border effect\n   - Sparkle icon\n   - Premium badge or \"Pro\" indicator\n   - Slightly larger than style cards\n   - Tooltip: \"Top-tier anime generation model\"\n\n3. Behavior when Niji is selected:\n   - Disable/dim the standard style grid\n   - Show visual indicator that specialized model is active\n   - Maybe show \"Niji Mode Active\" badge near generate button\n   - Style is now controlled by the specialized engine\n\n4. Can toggle off Niji to return to standard styles\n\n**Premium feel:**\n- Gold shimmer animation on hover\n- Elevated card with shadow\n- Clearly positioned as premium/special option", "type": "feature", "passes": true, "id": 20}, {"description": "**Motion Lab: Add \"Video Model\" Dropdown with Veo Integration**\n\n**UI Addition (at top of Left Panel, above prompt/upload):**\n\n1. Add \"Video Model\" dropdown selector:\n   - Label: \"Video Model\"\n   - Dropdown with glassmorphism styling\n\n2. Dropdown Options:\n   - **\"Standard Motion\"** - Default option\n     - Subtitle: \"Runway/Luma\"\n     - No badge\n   \n   - **\"‚≠ê Google Veo\"** - Premium option\n     - Subtitle: \"Photoreal Pro\"\n     - \"Ultra Plan\" or \"Pro\" badge next to it\n     - Slightly highlighted/special styling\n     - Gold star icon\n\n3. Helper text below dropdown:\n   - Small tooltip/text: \"Veo offers unmatched realism for professional use\"\n   - Subtle, informative\n\n4. Behavior:\n   - When Veo is selected, show that it requires Ultra Plan\n   - If user is on free tier, show upgrade prompt or lock indicator\n   - Visual indicator of which model is active\n\n5. Premium styling:\n   - Veo option has special treatment in dropdown\n   - Maybe gold accent or star icon\n   - Clearly communicates it's top-tier", "type": "feature", "passes": true, "id": 21}, {"description": "**Add Cookie Consent Banner - GDPR/Legal Compliance**\n\n**Cookie Banner Component:**\n\n1. Position & Style:\n   - Fixed at the bottom of the screen\n   - z-index 50 (above content, below modals)\n   - Minimalist dark glassmorphism (backdrop blur, semi-transparent bg)\n   - Distinct from background but matching Synapse aesthetic\n   - Subtle border top (#333)\n   - Padding and spacing for readability\n\n2. Content:\n   - Text: \"We use cookies to provide the best AI experience and analyze usage. By using Synapse, you agree to our policies.\"\n   - Keep text concise and professional\n   - Maybe a small cookie icon\n\n3. Buttons:\n   - \"Accept\" - Solid Electric Blue/Indigo gradient, primary action\n   - \"Decline\" - Outline/Ghost style, secondary action\n   - Both buttons same size, side by side\n   - Hover effects\n\n4. Behavior:\n   - Check localStorage for 'cookieConsent' on mount\n   - If consent already given (accepted or declined), don't show banner\n   - On \"Accept\" click: save 'cookieConsent': 'accepted' to localStorage, hide banner\n   - On \"Decline\" click: save 'cookieConsent': 'declined' to localStorage, hide banner\n   - Smooth fade-in animation on first appearance\n   - Smooth fade-out when dismissed\n\n5. First Visit Only:\n   - Only show on first visit when no consent recorded\n   - Never show again after user makes a choice", "type": "feature", "passes": true, "id": 22}, {"description": "**Add Professional Footer - Tier-1 SaaS Style**\n\n**Footer Component (Global):**\n\n1. Position & Style:\n   - At the bottom of the main layout (after content)\n   - Full width, dark background (#000 or slight variation)\n   - Subtle top border (#222 or #333)\n   - Proper padding (py-6 or similar)\n   - Glassmorphism subtle effect optional\n\n2. Layout (Three Sections):\n\n   **Left Section:**\n   - Synapse logo (smaller version) with sparkle icon\n   - Copyright text: \"¬© 2026 Synapse AI. All rights reserved.\"\n   - Small, muted text color\n\n   **Center Section:**\n   - Social Media Icons (horizontal row):\n     - Twitter/X icon (link to #)\n     - Discord icon (link to #)\n     - GitHub icon (link to #)\n   - Icons should be subtle, muted color, brighten on hover\n   - Proper spacing between icons\n\n   **Right Section:**\n   - Legal Links (horizontal or vertical list):\n     - \"Privacy Policy\" (link to /privacy or #)\n     - \"Terms of Service\" (link to /terms or #)\n     - \"Refund Policy\" (link to /refunds or #)\n   - Links are muted color, hover to brighten\n   - Small dot or pipe separators if horizontal\n\n3. Responsive:\n   - On mobile, stack sections vertically (centered)\n   - Proper spacing adjustments\n\n4. Integration:\n   - Add footer to the main layout so it appears on all pages\n   - Footer should be inside the main content area (not overlap sidebar on desktop)\n   - Scrollable with content, not fixed", "type": "feature", "passes": true, "id": 23}, {"description": "**Production Data Security - Remove Sensitive Logging**\n\n**Security Audit:**\n\n1. Review all API routes and remove/guard console.log statements:\n   - `/api/chat` - don't log user messages or prompts\n   - `/api/image` - don't log prompts or image data\n   - `/api/video` - don't log prompts\n   - `/api/enhance` - don't log image data\n   - `/api/video/animate` - don't log image data\n\n2. Add production check:\n   - Only log in development mode: `if (process.env.NODE_ENV === 'development')`\n   - Or remove console.logs entirely from sensitive areas\n\n3. Ensure no sensitive data exposed:\n   - API keys should only be in env vars (already done)\n   - User prompts should not be logged\n   - Image/video data should not be logged\n   - Error messages should be generic to users, detailed only in dev\n\n4. Best practices:\n   - Keep error logging for debugging but sanitize sensitive info\n   - Don't expose internal error details to frontend in production", "type": "feature", "passes": true, "id": 24}, {"description": "**NEW FEATURE: Audio Studio Tab**\n\n**1. Add to Sidebar Navigation:**\n- New tab: \"Audio Studio\" with Music note icon (from Lucide)\n- Position it after \"Motion Lab\" in the nav order\n- Same styling as other nav items\n\n**2. Audio Studio Page - Split View Layout:**\n\n**Left Panel (Controls):**\n\n*Mode Switcher at top:*\n- Two modes: \"Music Generator\" and \"Voice Lab\"\n- Toggle buttons similar to other studios\n\n**MODE 1: Music Generator**\n- Prompt textarea: \"Describe the song style, mood, and lyrics topic...\"\n- Placeholder examples: \"upbeat pop song about summer love\" or \"dark electronic instrumental\"\n- Toggle: \"Instrumental Only\" vs \"With Lyrics\" (two buttons)\n- Genre quick-select chips (optional): Pop, Electronic, Hip-Hop, Classical, Rock\n- Duration selector: 30s, 60s, 2min\n- Generate button: \"Generate Hit üéµ\" with gradient and glow\n- Loading state: \"Composing...\" with music note animation\n\n**MODE 2: Voice Lab (Text-to-Speech & Cloning)**\n- Large text area: \"Enter text to convert to speech...\"\n- Character count indicator\n\n*Voice Selector:*\n- Dropdown with preset voices:\n  - \"Male - Professional\"\n  - \"Male - Casual\"\n  - \"Female - Professional\"\n  - \"Female - Warm\"\n  - \"Robot - Futuristic\"\n  - Divider\n  - \"+ My Cloned Voices\" section (if any)\n\n*CLONE FEATURE - \"Instant Voice Cloning\":*\n- Section label: \"Create Your Voice Clone\"\n- \"‚ûï Add My Voice\" button (prominent, special styling)\n- When clicked, show upload options:\n  - Drag-and-drop zone for 30s audio file (MP3/WAV)\n  - OR \"Record with Microphone\" button\n  - Waveform visualization when audio is loaded/recording\n  - Progress indicator during processing\n  - \"Clone Voice\" button to process\n- Show cloned voices in the dropdown after creation\n- Premium badge indicating this is an Ultra feature\n\n*Generate button:*\n- \"Generate Speech\" for TTS\n- Shows which voice is selected\n\n**Right Panel (Results):**\n- Audio player for generated content\n- Waveform visualization\n- Play/Pause, timeline scrubber\n- Download button\n- Recent generations list with thumbnails/previews\n\n**Style:**\n- Same premium dark theme\n- Glassmorphism panels\n- Music-themed accents (maybe purple/pink gradient for audio)", "type": "feature", "passes": true, "id": 25}, {"description": "**UI FIX: Prominent 'Get Premium' Button in Header**\n\n**1. Add Premium Button to Top Right Header:**\n- Position: Top right of the main content area, next to user avatar\n- Visible on all pages/tabs\n\n**2. Button Design:**\n- Text: \"Get Premium\" or \"üëë Get Premium\"\n- Crown icon (üëë) before text\n- Gradient: Gold/Orange/Amber gradient (from-amber-500 to-orange-500)\n- Rounded, padded nicely\n- Subtle shadow/glow effect\n\n**3. Animation:**\n- Subtle pulsate/breathing animation to grab attention\n- Not too aggressive, but noticeable\n- Scale or glow pulse every few seconds\n\n**4. Behavior:**\n- Click opens the Paywall Modal\n- Same as sidebar \"Upgrade Plan\" button\n\n**5. Responsive:**\n- On mobile, show in the mobile top bar\n- Maybe smaller/icon-only on very small screens\n\n**6. Keep sidebar button too:**\n- The sidebar \"Upgrade Plan\" button stays\n- Header button is additional prominent placement", "type": "feature", "passes": true, "id": 26}, {"description": "**PRICING UPDATE: Competitive RUB Pricing in Paywall Modal**\n\n**Update the Paywall Modal with new pricing tiers:**\n\n**Tier 1: LITE (Entry Level)**\n- Price: **690 ‚ÇΩ / month**\n- Badge: None or \"Starter\"\n- Features:\n  - ‚úì GPT-4o Mini access\n  - ‚úì Flux image generation\n  - ‚úì 500 Credits included\n  - ‚úó No Video generation\n  - ‚úó No Voice cloning\n  - ‚úó No Music generation\n- Tagline: \"Perfect for beginners\"\n- Button: \"Start Lite\"\n\n**Tier 2: STANDARD (Most Popular)**\n- Price: **1 890 ‚ÇΩ / month**\n- Badge: \"Most Popular\" or \"Popular\" (highlighted)\n- Features:\n  - ‚úì All LITE features\n  - ‚úì GPT-4o & Claude access\n  - ‚úì Music Generation\n  - ‚úì Midjourney/Niji styles\n  - ‚úì 2 000 Credits included\n  - ‚úó No Video generation\n  - ‚úó No Voice cloning\n- Tagline: \"Best value for creators\"\n- Button: \"Get Standard\"\n- This tier should be visually highlighted (border glow, larger)\n\n**Tier 3: ULTRA (Professional)**\n- Price: **4 990 ‚ÇΩ / month**\n- Badge: \"Pro\" or \"Ultra\"\n- Features:\n  - ‚úì All STANDARD features\n  - ‚úì Video generation (Veo/Kling)\n  - ‚úì Voice Cloning\n  - ‚úì Priority processing speed\n  - ‚úì 6 000 Credits included\n  - ‚úì API access\n- Tagline: \"For professionals & teams\"\n- Button: \"Go Ultra\"\n- Premium styling (maybe gold accent)\n\n**Visual Updates:**\n- Currency symbol: ‚ÇΩ (Russian Ruble)\n- Show \"/month\" or \"/–º–µ—Å\" clearly\n- Feature lists with checkmarks (‚úì) and X marks (‚úó)\n- Clear visual hierarchy\n- Standard tier highlighted as recommended\n\n**Credit costs (for reference in UI):**\n- Voice Cloning: 50 credits per clone\n- Music Generation: 10 credits per song\n- Show these costs where relevant in Audio Studio", "type": "feature", "passes": true, "id": 27}, {"description": "**BRANDING CHANGE: Rename \"Niji Anime V6\" to \"Nana Banana\" üçå**\n\n**1. Find and rename the specialized engine button:**\n- Change \"Niji Anime V6\" to \"‚ú® Nana Banana\"\n- This is in the Image Studio, specialized engines section\n\n**2. Styling:**\n- Keep the premium gold/yellow gradient glow\n- Make it look like the \"Secret Sauce\" of the app\n- Sparkle or Star icon (use Sparkles from Lucide)\n- Premium, eye-catching appearance\n\n**3. Update any references:**\n- Generate button text when Nana Banana is active\n- Any tooltips or descriptions\n- API parameter if it references \"niji-v6\" can stay for backend, just UI name changes", "type": "feature", "passes": true, "id": 28}, {"description": "**UI POLISH: Add Helper Subtitles to Style Cards in Image Studio**\n\n**Update the Style Selector cards with descriptive subtitles:**\n\n**Card 1: Photorealistic**\n- Keep: Camera icon\n- Add subtitle: \"Indistinguishable from reality.\"\n\n**Card 2: Anime/Manga** \n- Keep: Sparkles icon\n- Add subtitle: \"Japanese animation style.\"\n\n**Card 3: 3D Render**\n- Keep: Box icon\n- Add subtitle: \"Pixar-level CGI & characters.\"\n\n**Card 4: Cyberpunk**\n- Keep: Zap icon\n- Add subtitle: \"Neon lights & future tech.\"\n\n**Styling:**\n- Subtitles should be smaller text, muted color\n- Don't make cards too tall - keep compact\n- Subtitle appears below the style name\n- Should help users understand what each style produces", "type": "feature", "passes": true, "id": 29}, {"description": "**FINAL UI CHECK & FIXES**\n\n**1. Verify \"Get Premium\" button in Header:**\n- Ensure the gold/orange gradient premium button is visible in the top right\n- Should be on all pages (Chat, Image Studio, Motion Lab, Audio Studio)\n- Crown icon + \"Get Premium\" text\n- Opens Paywall Modal on click\n\n**2. Verify Mobile Menu works:**\n- Hamburger icon visible on mobile (< 768px)\n- Click opens slide-out drawer\n- All navigation items present\n- Credits display visible\n- Upgrade button in mobile menu\n- Drawer closes when nav item clicked\n- Premium button also in mobile top bar\n\n**3. Fix any issues found:**\n- If premium button missing, add it\n- If mobile menu broken, fix it\n- Ensure consistent experience across all views", "type": "feature", "passes": true, "id": 30}, {"description": "**API WIRING: Image Studio Backend (`/api/image`)**\n\n**Update the `/api/image` route with full integration:**\n\n**1. Standard Generation (OpenRouter):**\n- Use `black-forest-labs/flux-1-schnell` model via OpenRouter\n- Pass prompt, aspect ratio, style to the API\n- Return generated image URL/base64\n\n**2. Nana Banana Style Detection:**\n- If `specializedEngine === 'nana-banana'` or style indicates Nana Banana\n- Append to prompt: \"anime masterpiece, niji style, vibrant colors, high quality anime art\"\n- Still use `flux-1-schnell` but with enhanced anime prompt\n\n**3. Style Prompt Enhancement:**\n- Photorealistic: append \"photorealistic, 8k, detailed\"\n- Anime: append \"anime style, manga art\"\n- 3D Render: append \"3D render, Pixar style, CGI\"\n- Cyberpunk: append \"cyberpunk, neon lights, futuristic\"\n\n**4. Credit Billing:**\n- Standard generation: 1 credit\n- Track in response or handle on frontend\n- Return credit cost in response for frontend to deduct\n\n**5. Error Handling:**\n- If API fails, return user-friendly error\n- Don't expose internal API errors\n- Log errors only in development", "type": "feature", "passes": true, "id": 31}, {"description": "**API WIRING: Enhance Endpoint with Replicate (`/api/enhance`)**\n\n**Update `/api/enhance` to use Replicate API:**\n\n**1. Face Restore:**\n- Use Replicate model: `sczhou/codeformer`\n- Send the uploaded image\n- Parameters: fidelity, background enhancement\n- Return restored image\n\n**2. Colorize:**\n- Use Replicate model: `deoldify/deoldify`\n- Send B&W image\n- Return colorized image\n\n**3. Beauty Retouch:**\n- Can use image-to-image with subtle prompt\n- Or a dedicated retouch model on Replicate\n- Keep changes subtle to maintain likeness\n\n**4. Replicate Integration:**\n- Use `REPLICATE_API_TOKEN` environment variable\n- Make POST request to Replicate API\n- Handle async prediction (poll for result or use webhook)\n- Return final image URL\n\n**5. Credit Billing:**\n- Enhancement costs 3 credits\n- Return credit cost in response\n\n**6. Error Handling:**\n- If Replicate out of funds or fails:\n- Return user-friendly message: \"High load on GPU, please try again later\"\n- Don't expose payment/billing errors to users", "type": "feature", "passes": true, "id": 32}, {"description": "**API WIRING: Motion Lab Video Backend (`/api/video`)**\n\n**Create/Update `/api/video` with Replicate integration:**\n\n**1. Standard Video (Text-to-Video):**\n- Use Replicate model for video generation\n- Models to try: `luma/ray` or similar text-to-video\n- Pass prompt, duration, aspect ratio\n\n**2. Image-to-Video (Bring Photo to Life):**\n- Use image-to-video model on Replicate\n- Models: `kling-ai/kling-v1` or `luma/ray` with image input\n- Pass uploaded image + prompt\n\n**3. Preset Prompt Construction:**\n- smile-blink: \"person smiles warmly, natural eye blinks, subtle head movement\"\n- wave-hello: \"person waves hand, friendly expression\"\n- look-around: \"person looks left then right, curious expression\"\n- old-film: \"vintage film effect, sepia, grain, slow movement\"\n\n**4. Video Model Selection:**\n- Standard Motion: use default model\n- Google Veo (Pro): use premium model (or same with quality boost)\n\n**5. Credit Billing:**\n- Video generation: 15 credits\n- Return cost in response\n\n**6. Error Handling:**\n- User-friendly errors\n- \"High load on GPU\" for payment/resource issues", "type": "feature", "passes": true, "id": 33}, {"description": "**API WIRING: Audio Studio Backend (`/api/audio`)**\n\n**Create new `/api/audio` endpoint:**\n\n**1. Music Generation:**\n- Use Replicate model: `facebook/musicgen-melody` or `facebook/musicgen-large`\n- Accept: prompt, duration, instrumental (boolean)\n- If with lyrics, include lyrics context in prompt\n- Return audio URL\n\n**2. Voice/TTS Generation:**\n- Use Replicate model: `coqui/xtts-v2` or similar TTS\n- Accept: text, voice preset (male/female/robot)\n- Map voice presets to model parameters\n- Return audio URL\n\n**3. Voice Cloning:**\n- Accept: reference audio file, text to speak\n- Use XTTS or similar clone-capable model\n- Return cloned voice audio\n- This is premium feature (Ultra plan)\n\n**4. Credit Billing:**\n- Music: 10 credits\n- Voice TTS: 5 credits\n- Voice Clone: 50 credits\n\n**5. Error Handling:**\n- User-friendly messages\n- Handle Replicate failures gracefully", "type": "feature", "passes": true, "id": 34}, {"description": "**ADMIN DASHBOARD: Create `/admin` Route**\n\n**1. Access Control:**\n- Hidden route at `/admin`\n- Option 1: Check localStorage for `adminAccess: true`\n- Option 2: Add hidden link in footer (small, barely visible)\n- Option 3: Secret click pattern on Synapse logo\n- If not authorized, redirect to home or show \"Not Found\"\n\n**2. Dashboard Layout - Premium Dark Theme:**\n\n**Card 1: System Health**\n- Title: \"API Status\"\n- OpenRouter Status:\n  - Fetch from `https://openrouter.ai/api/v1/auth/key` using OPENROUTER_API_KEY\n  - Display: API Status (green/red indicator)\n  - Display: **Exact $ Balance** remaining\n  - Last checked timestamp\n- Replicate Status:\n  - Check if REPLICATE_API_TOKEN is configured\n  - Status indicator (green if present)\n  - \"Manage Billing\" button linking to replicate.com/account/billing\n\n**Card 2: Business Metrics (Local Simulation)**\n- Title: \"Business Overview\"\n- Total Visits/Users: Mock count (can use localStorage counter)\n- Total Generations: Sum of messageCount + imageCount + videoCount\n- Breakdown by type (chat, image, video, audio)\n- Estimated Revenue: Generations * Average Price per generation\n- Display in both RUB and USD\n\n**Card 3: API Key Manager**\n- Title: \"Configuration\"\n- Input fields to view/update API keys:\n  - OpenRouter API Key (masked, show last 4 chars)\n  - Replicate API Token (masked)\n- \"Update\" buttons\n- Note: These would update env vars or localStorage override\n- \"Test Connection\" buttons for each\n\n**Card 4: Quick Actions**\n- \"Clear All Usage Data\" button (resets localStorage counters)\n- \"View Error Logs\" (if any stored)\n- Links to API dashboards\n\n**3. Add to Navigation:**\n- Don't add to main sidebar (hidden)\n- Access via direct URL `/admin` or secret method", "type": "feature", "passes": true, "id": 35}, {"description": "**SAFETY & ERROR HANDLING: User-Friendly Error Messages**\n\n**1. API Error Handling Pattern:**\n- Wrap all external API calls in try-catch\n- Never expose raw error messages to users\n- Never mention \"payment\", \"billing\", \"funds\" in user-facing errors\n\n**2. User-Friendly Error Messages:**\n- API timeout: \"Generation is taking longer than expected. Please try again.\"\n- Rate limit: \"High demand right now. Please wait a moment and try again.\"\n- Out of funds/Payment: \"High load on GPU servers, please try again later.\"\n- Invalid input: \"Please check your input and try again.\"\n- Model unavailable: \"This feature is temporarily unavailable. Try a different option.\"\n- Network error: \"Connection issue. Please check your internet and try again.\"\n\n**3. Toast Notifications:**\n- Create or use a toast notification system\n- Show errors as dismissible toasts\n- Red/error styling but not alarming\n- Auto-dismiss after 5 seconds\n\n**4. Logging:**\n- Log detailed errors server-side in development only\n- Never log in production\n- Keep error context for debugging\n\n**5. Fallback Behavior:**\n- If primary model fails, don't automatically try backup (costs money)\n- Just show error and let user retry\n- Preserve user's input so they don't lose work", "type": "feature", "passes": true, "id": 36}, {"description": "**SECURITY UPDATE: Hide Admin & API Keys from Settings**\n\n**1. Remove API Key Inputs Section:**\n- Find the Settings page/component\n- Remove any UI elements that show or allow editing API keys (OpenRouter, Replicate)\n- Users should NOT see or manage these keys\n- Keep API keys only on the backend/admin dashboard\n\n**2. Hide Admin Dashboard Button:**\n- By default, the \"Open Admin Dashboard\" button must be HIDDEN\n- Don't show it in the normal Settings view\n- Remove any visible admin access from the regular UI\n\n**3. Implement \"Secret Knock\" for Developer Mode:**\n- Add a small, subtle version text at the bottom of Settings: \"Synapse v2.0\"\n- Style it as muted, small text (looks like a normal version label)\n- Track clicks on this text\n- If clicked 5 times in a row within 3 seconds:\n  - Reveal the Admin Dashboard button\n  - Show toast notification: \"Developer Mode Enabled üïµÔ∏è‚Äç‚ôÇÔ∏è\"\n  - Store in state (not localStorage, so it resets on page refresh for security)\n- The admin button appears with a subtle fade-in animation\n- This keeps UI clean for users but accessible for the owner", "type": "feature", "passes": true, "id": 37}, {"description": "**GROWTH FEATURE: Referral System in Settings**\n\n**1. Add \"Invite Friends & Earn\" Card:**\n- New card in Settings page\n- Position: Prominent placement, maybe after account section\n- Icon: Gift/Present icon (Gift from Lucide)\n- Gradient border effect (indigo/purple) to make it inviting\n- Premium feel matching Synapse aesthetic\n\n**2. Card Content:**\n\n*Headline:*\n- \"Invite Friends & Earn üéÅ\" or \"Refer & Get Rewarded\"\n\n*Description:*\n- \"Get **500 Credits** for every friend who subscribes!\"\n- Make \"500 Credits\" bold or highlighted\n\n*Your Unique Referral Link:*\n- Generate a unique link: `https://synapse.ai?ref={user_id}`\n- User ID can be generated randomly and stored in localStorage\n- Display the link in a styled input/box\n- \"Copy\" button next to it\n- On copy, show toast: \"Link copied! Share with friends üìã\"\n\n*Stats Counter:*\n- Two stat boxes side by side:\n  - \"Friends Invited: 0\" (with Users icon)\n  - \"Credits Earned: 0\" (with Coins/Gift icon)\n- These pull from localStorage referral tracking\n\n**3. Referral Logic:**\n\n*On App Load (in root/layout):*\n- Check URL for `?ref=...` parameter\n- If present, store referrer ID in localStorage: `referredBy: 'user_id'`\n- Don't overwrite if already set (first referrer wins)\n\n*On Successful Upgrade (in Paywall):*\n- When user clicks Subscribe (simulated)\n- Check if `referredBy` exists in localStorage\n- If yes:\n  - Get referrer ID\n  - Add 500 credits to referrer's rewards (stored in localStorage)\n  - Increment referrer's \"Friends Invited\" count\n  - Show success animation/toast: \"Your referrer earned 500 credits! üéâ\"\n  - Clear `referredBy` so it doesn't trigger again\n\n*Referrer Notification:*\n- When a referred user subscribes, the referrer sees:\n  - Toast: \"You just earned 500 credits! üéâ\"\n  - Updated stats in Settings\n\n**4. User ID Generation:**\n- On first visit, generate a unique user ID (random string)\n- Store in localStorage: `userId: 'abc123xyz'`\n- Use this for the referral link", "type": "feature", "passes": true, "id": 38}, {"description": "**CLEANUP: Professional Settings Page Layout**\n\n**1. Organize Settings into Clear Sections:**\n\n*Section 1: Account*\n- User avatar/profile placeholder\n- Display name (editable or placeholder)\n- Email placeholder\n- Current plan badge (Free/Lite/Standard/Ultra)\n\n*Section 2: Referral Program*\n- The \"Invite Friends & Earn\" card (from previous task)\n- Prominent but not overwhelming\n\n*Section 3: Preferences*\n- Theme toggle (Dark only for now, greyed out Light option)\n- Language selector (English, Russian)\n- Notification preferences toggles\n\n*Section 4: Data & Privacy*\n- \"Clear Chat History\" button\n- \"Clear Generated Images\" button  \n- \"Export My Data\" button (placeholder)\n- \"Delete Account\" button (red, with confirmation)\n\n*Section 5: About*\n- App version: \"Synapse v2.0\" (this is also the secret knock trigger)\n- Links: Help Center, Contact Support, Report Bug\n- Social links row\n\n**2. Visual Cleanup:**\n- Consistent card styling throughout\n- Proper spacing between sections\n- Section headers with subtle dividers\n- No cluttered or confusing elements\n- Professional, clean appearance like Vercel/Linear settings\n\n**3. Mobile Responsive:**\n- Stack cards vertically on mobile\n- Touch-friendly buttons and toggles\n- Proper padding", "type": "feature", "passes": true, "id": 39}, {"description": "**ADMIN SECURITY: PIN Protection for Developer Mode**\n\n**1. Modify Secret Knock Logic in Settings:**\n- After user clicks \"Synapse v2.0\" 5 times, DO NOT immediately show admin button\n- Instead, show a PIN Input Modal\n\n**2. PIN Input Modal Design:**\n- Title: \"Enter Security PIN\" or \"üîê Developer Access\"\n- Simple input field for 4-digit PIN\n- Masked input (show dots like password)\n- \"Confirm\" button\n- \"Cancel\" button to close modal\n- Dark glassmorphism styling matching Synapse\n\n**3. PIN Verification:**\n- Hardcoded PIN: `7777`\n- On correct PIN:\n  - Close modal\n  - Redirect to `/admin` page\n  - Show toast: \"Access Granted üîì\"\n- On wrong PIN:\n  - Show error: \"Invalid PIN\"\n  - Clear input\n  - Allow retry (max 3 attempts, then lock for 30 seconds)\n\n**4. Security:**\n- Don't store PIN in frontend code comments\n- PIN check happens client-side for now (no backend)\n- After 3 failed attempts, show: \"Too many attempts. Try again later.\"\n- Reset attempt counter after successful entry or timeout", "type": "feature", "passes": true, "id": 40}, {"description": "**GIFT CODE SYSTEM: Admin Generation & User Redemption**\n\n**PART A: Admin Dashboard - Generate Gift Codes**\n\nAdd new card in Admin Dashboard: \"Gift Code Manager\"\n\n**1. Code Generation Section:**\n- Title: \"Generate Gift Codes\"\n- Dropdown: Select code type:\n  - \"500 Credits\" \n  - \"1000 Credits\"\n  - \"LITE Plan (1 month)\"\n  - \"STANDARD Plan (1 month)\"\n  - \"ULTRA Plan (1 month)\"\n- Button: \"Generate Code\"\n- On click:\n  - Generate random code format: `SYNAPSE-XXXX-XXXX` (e.g., `SYNAPSE-A7K2-M9P4`)\n  - Store code in localStorage with its value/type\n  - Display the generated code prominently\n  - \"Copy Code\" button\n\n**2. Active Codes List:**\n- Show table/list of generated codes\n- Columns: Code | Type/Value | Status (Active/Redeemed) | Created Date\n- Option to deactivate/delete unused codes\n\n**3. Code Storage Structure:**\n```\nlocalStorage: giftCodes = [\n  { code: 'SYNAPSE-A7K2-M9P4', type: 'credits', value: 500, status: 'active', created: timestamp },\n  { code: 'SYNAPSE-B3X1-N5Q8', type: 'plan', value: 'STANDARD', status: 'redeemed', created: timestamp }\n]\n```\n\n**PART B: User Settings - Redeem Code**\n\nAdd to Settings page: \"Redeem Code\" section\n\n**1. UI Design:**\n- Card title: \"Redeem Gift Code\" with Gift icon\n- Input field: Placeholder \"Enter your code (e.g., SYNAPSE-XXXX-XXXX)\"\n- Button: \"Redeem\"\n- Subtle text: \"Have a promo code? Enter it here to unlock credits or plans.\"\n\n**2. Redemption Logic:**\n- On submit, check code against localStorage giftCodes\n- If code found and status is 'active':\n  - Apply the reward (add credits or upgrade plan)\n  - Mark code as 'redeemed' in storage\n  - Show success animation/toast: \"üéâ Code redeemed! You received [reward]!\"\n  - Update user's credits/plan display\n- If code not found or already used:\n  - Show error: \"Invalid or expired code\"\n\n**3. Reward Application:**\n- Credits: Add to user's credit balance\n- Plan: Set user's plan in localStorage, unlock features", "type": "feature", "passes": true, "id": 41}, {"description": "**EXPORT PREPARATION: Environment Variables for Vercel Deployment**\n\n**1. Review and Document Environment Variables:**\n- Ensure all API keys use standard naming:\n  - `OPENROUTER_API_KEY` - for OpenRouter API\n  - `REPLICATE_API_TOKEN` - for Replicate API\n- These should be accessed via `process.env.VARIABLE_NAME` or framework equivalent\n\n**2. Create/Update Environment Example File:**\n- Create `.env.example` file in project root\n- List all required environment variables with placeholder values:\n```\n# OpenRouter API (for Chat & Image generation)\nOPENROUTER_API_KEY=your_openrouter_api_key_here\n\n# Replicate API (for Video, Audio, Enhancement)\nREPLICATE_API_TOKEN=your_replicate_token_here\n```\n\n**3. Verify API Routes Use Env Vars Correctly:**\n- Check all API routes access keys properly\n- Ensure no hardcoded keys anywhere\n- Keys should work when set in Vercel dashboard\n\n**4. Add Deployment Notes:**\n- Add comments or README section about required env vars\n- Note which features require which keys\n\n**5. Fallback Handling:**\n- If env var is missing, API routes should return graceful error\n- Don't crash the app, show user-friendly message\n- Log warning in development mode only", "type": "feature", "passes": true, "id": 42}, {"description": "**AUTHENTICATION: Login Screen Modal**\n\n**1. Create Auth Modal/Overlay:**\n- Shows on first visit (check localStorage for logged-in state)\n- Covers the entire screen with dark overlay\n- Cannot be dismissed without logging in\n- Premium glassmorphism card in center\n\n**2. Modal Design:**\n- Synapse logo at top with sparkle animation\n- Title: \"Welcome to Synapse AI\"\n- Subtitle: \"The premium AI platform for creators\"\n\n**3. Login Options:**\n- \"Continue with Google\" button:\n  - Google icon/logo\n  - White background, dark text\n  - Hover effect\n- \"Continue with Email\" button:\n  - Email icon\n  - Outline/secondary style\n  - On click, show email input field\n  - Simple email input + \"Continue\" button\n\n**4. Mock Login Logic:**\n- On any login click:\n  - Generate unique User ID if not exists\n  - Store in localStorage: `user: { id, email, name, avatar, loggedIn: true, createdAt }`\n  - Close modal\n  - Show toast: \"Welcome to Synapse! üöÄ\"\n- For Google: use mock name like \"User\" + random avatar\n- For Email: use entered email as identifier\n\n**5. User Avatar Display:**\n- After login, show user avatar in top-right corner\n- Dropdown on click: \"My Account\", \"Settings\", \"Logout\"\n- Logout clears session, shows login modal again\n\n**6. Persist Credits to User:**\n- Link credits/usage to User ID\n- Storage structure: `users: { [id]: { credits, plan, usage, ... } }`\n- This allows future multi-user support", "type": "feature", "passes": true, "id": 43}, {"description": "**ADMIN: Financial Dashboard Tab (CFO View)**\n\n**1. Add Tabs to Admin Dashboard:**\n- Create tab navigation at top of admin page\n- Tabs: \"Overview\" (current), \"Finances & P&L\", \"Gift Codes\"\n- Professional tab styling\n\n**2. Finances Tab - Top KPI Cards (4 cards in row):**\n\n**Card 1: Total Users üë•**\n- Icon: Users icon\n- Value: Count of registered users from localStorage\n- Subtitle: \"Registered accounts\"\n- Trend indicator if possible\n\n**Card 2: Gross Revenue üí∞**\n- Icon: DollarSign or Coins icon\n- Value: Sum of all redeemed Gift Code values in RUB\n- Convert plan codes to their RUB value (LITE=690, STANDARD=1890, ULTRA=4990)\n- Subtitle: \"From gift codes & subscriptions\"\n\n**Card 3: AI Costs (COGS) üìâ**\n- Icon: Server or Database icon\n- Value: Calculated from usage (approximate cost per generation)\n- Estimate: Chat=$0.001, Image=$0.02, Video=$0.10, Audio=$0.05 per generation\n- Convert to RUB at ~90 rate\n- Subtitle: \"API usage costs\"\n\n**Card 4: Net Profit üí∏**\n- Icon: TrendingUp icon\n- Value: Calculated using profit formula\n- Green if positive, red if negative\n- Subtitle: \"After tax & expenses\"\n\n**3. Card Styling:**\n- Dark glassmorphism cards\n- Large prominent numbers\n- Icons with accent colors\n- Professional banking dashboard feel", "type": "feature", "passes": true, "id": 44}, {"description": "**ADMIN: Profit Calculator & Expense Tracking**\n\n**1. Tax Rate Section:**\n- Display: \"Tax Rate: 11%\" (hardcoded)\n- Small info text: \"Applied to gross revenue\"\n- Maybe allow editing in future, locked for now\n\n**2. Operating Expenses Section:**\n- Title: \"Operating Expenses\"\n- Subtitle: \"Track server and API payments\"\n\n**Add Expense Button:**\n- \"‚ûï Log Server Payment\" button\n- Opens a modal/form with fields:\n  - Amount: Number input (in USD or RUB, with currency selector)\n  - Service: Dropdown (OpenRouter, Replicate, Vercel, Other)\n  - Date: Date picker (default today)\n  - Note: Optional text field\n- \"Save Expense\" button\n\n**Expense List:**\n- Table showing logged expenses:\n  - Date | Service | Amount | Note | Delete button\n- Running total at bottom\n- Stored in localStorage: `expenses: [{ amount, service, date, note }]`\n\n**3. Profit Calculation Formula:**\n```\nGross Revenue = Sum of redeemed codes/subscriptions\nTax (11%) = Gross Revenue * 0.11\nRevenue After Tax = Gross Revenue - Tax\nTotal Costs = AI Usage Costs + Manual Expenses\nNet Profit = Revenue After Tax - Total Costs\n```\n\n**4. Display Breakdown:**\n- Show calculation breakdown:\n  - Gross Revenue: X ‚ÇΩ\n  - Tax (11%): -Y ‚ÇΩ\n  - AI Costs: -Z ‚ÇΩ\n  - Server Expenses: -W ‚ÇΩ\n  - _______________\n  - Net Profit: P ‚ÇΩ\n- Color coded (red for expenses, green for profit)", "type": "feature", "passes": true, "id": 45}, {"description": "**ADMIN: Revenue vs Expenses Bar Chart**\n\n**1. Create Simple Bar Chart Visualization:**\n- Title: \"Revenue vs Expenses\"\n- Two bars side by side:\n  - Revenue bar (green/indigo gradient)\n  - Expenses bar (red/orange gradient)\n- Show values on top of bars\n- Percentage margin indicator\n\n**2. Chart Implementation:**\n- Use CSS for simple bar chart (no external library needed)\n- Or use a lightweight chart approach\n- Bars should be proportional to values\n- Max height based on larger value\n\n**3. Additional Mini Charts (optional):**\n- Pie chart: Revenue breakdown by plan type\n- Or simple progress bars showing ratios\n\n**4. Styling:**\n- Dark theme matching admin dashboard\n- Subtle grid lines\n- Clear labels\n- Professional financial dashboard appearance\n- Responsive on different screen sizes\n\n**5. Data Source:**\n- Pull from localStorage:\n  - Revenue: redeemed gift codes\n  - Expenses: AI costs + manual expenses\n- Update in real-time when data changes", "type": "feature", "passes": true, "id": 46}, {"description": "**BUG FIX: Header Overlap between Upgrade Button and User Avatar**\n\n**Issue:** The \"Get Premium\" button and User Avatar in the top-right are overlapping or colliding.\n\n**Fix Requirements:**\n1. Find all header components across the app (Chat, Image Studio, Motion Lab, Audio Studio)\n2. Ensure the header container uses proper Flexbox layout:\n   - `flex items-center justify-end gap-4` (16px gap between elements)\n3. Elements should be in a single flex row with proper spacing\n4. Neither element should be absolutely positioned in a way that causes overlap\n5. Order should be: [Other header content] ... [Premium Button] [User Avatar]\n6. On mobile, ensure both fit or stack appropriately\n7. Test that clicking either element works without interference\n\n**Check these files:**\n- Chat interface header\n- Image Studio header\n- Motion Lab header  \n- Audio Studio header\n- Mobile top bar\n- Any shared header component", "type": "bug", "passes": true, "id": 47}, {"description": "**VERIFY & ENHANCE: Login Modal and User Tracking**\n\n**1. Verify Login Modal exists and works:**\n- Modal should appear automatically if user not logged in\n- Clean dark glassmorphism design\n- Title: \"Welcome to Synapse AI\"\n- Email input field\n- \"Continue to App\" or similar button\n- On submit: save email to localStorage, dismiss modal\n\n**2. If Login Modal is missing or broken, create/fix it:**\n- Check auth-context and AuthModal components\n- Ensure modal triggers on first visit\n- Ensure email is stored properly\n\n**3. User Registration Tracking:**\n- When user logs in with email, store in a users list:\n  ```\n  localStorage: registeredUsers = [\n    { email: 'user@example.com', registeredAt: timestamp, id: 'xxx' }\n  ]\n  ```\n- This allows Admin to count unique users\n\n**4. Admin Integration:**\n- In Admin Dashboard, \"Total Users\" should count these registered emails\n- Show the actual count from localStorage", "type": "feature", "passes": true, "id": 48}, {"description": "**VERIFY & ENHANCE: CFO Finance Dashboard**\n\n**1. Verify Finance Tab exists in Admin Dashboard:**\n- Should have tabs: Overview, Finances & P&L, Gift Codes\n- Finance tab should be functional\n\n**2. Verify/Fix Top KPI Cards:**\n- üü¶ **Total Users:** Count of registered emails from localStorage\n- üü© **Gross Revenue:** Sum of redeemed coupon values (convert plans to RUB: LITE=690, STANDARD=1890, ULTRA=4990, Credits at proportional rate)\n- üü• **Server Costs:** Sum of manually logged expenses\n- üü® **Net Profit:** (Revenue - 11% Tax) - Costs\n\n**3. Verify Expense Logger:**\n- \"Add Expense\" button/form\n- Input: Amount ($), Description\n- Save to localStorage: `expenses: [{ amount, description, date }]`\n- Display expense list with delete option\n\n**4. Auto-Calculation:**\n- Tax: 11% of Gross Revenue\n- Formula: Net Profit = (Gross Revenue * 0.89) - Server Costs - AI Costs\n- Display breakdown clearly\n\n**5. Professional Styling:**\n- Make it look like Stripe/banking dashboard\n- Clean card layouts\n- Proper number formatting with currency symbols\n- Color coding (green for profit, red for loss)\n- Trend indicators if applicable", "type": "feature", "passes": true, "id": 49}, {"description": "**CHAT UI UPDATE: Multi-Model Selector with Tiered Access**\n\n**1. Redesign Model Selector Dropdown:**\n- Position: Chat Header, left side\n- Stylish dropdown with glassmorphism styling\n- Default selection: \"GPT-4o Mini (Fast)\"\n\n**2. Dropdown Options with Full Details:**\n\n**Option 1: GPT-4o Mini üü¢**\n- Label: \"GPT-4o Mini\"\n- Subtitle: \"Fast & Efficient\"\n- Access: ALL plans (no lock)\n- Cost badge: \"0.1 credit/msg\"\n- Backend model: `openai/gpt-4o-mini`\n- Green dot indicator\n\n**Option 2: GPT-4o üîµ**\n- Label: \"GPT-4o\"\n- Subtitle: \"Smart Agent\"\n- Access: LOCKED for Start plan, requires Creator+\n- Cost badge: \"1 credit/msg\"\n- Backend model: `openai/gpt-4o`\n- Blue dot indicator\n- Show üîí lock icon if user on Start plan\n\n**Option 3: Claude 3.5 Sonnet üü£**\n- Label: \"Claude 3.5 Sonnet\"\n- Subtitle: \"Coding Genius\"\n- Access: LOCKED for Start/Creator, requires Pro Studio\n- Cost badge: \"3 credits/msg\"\n- Backend model: `anthropic/claude-3.5-sonnet`\n- Purple dot indicator\n- Show üîí lock icon if user not on Pro Studio\n\n**Option 4: GPT-5 / o1 ‚ö´üíé**\n- Label: \"GPT-5 / o1\"\n- Subtitle: \"God Mode\"\n- Access: STRICTLY Pro Studio only\n- Cost badge: \"20 credits/msg\" (highlighted in gold/warning)\n- Backend model: `openai/o1`\n- Diamond üíé icon\n- Premium styling (gold border/accent)\n- Show üîí lock icon if not Pro Studio\n\n**3. Dropdown Item Styling:**\n- Each option shows: Icon/dot, Model name, Subtitle, Cost badge\n- Locked items have muted opacity + lock icon\n- Selected item has checkmark or highlight\n- God Mode option has special premium styling\n\n**4. Interaction Logic:**\n- Clicking unlocked model: Switch selection, update state\n- Clicking locked model: DO NOT switch, open Paywall modal instead\n- Switching to God Mode: Show toast warning \"‚ö†Ô∏è High Cost: 20 credits per message\"\n- Show current selection in the dropdown trigger button", "type": "feature", "passes": true, "id": 50}, {"description": "**BACKEND: Update Chat API for Multi-Model Support**\n\n**1. Update `/api/chat` Route:**\n- Accept `model` parameter from frontend\n- Map model selection to OpenRouter model IDs:\n  - `gpt-4o-mini` ‚Üí `openai/gpt-4o-mini`\n  - `gpt-4o` ‚Üí `openai/gpt-4o`\n  - `claude-3.5-sonnet` ‚Üí `anthropic/claude-3.5-sonnet`\n  - `gpt-5-o1` or `o1` ‚Üí `openai/o1`\n- Default to `openai/gpt-4o-mini` if no model specified\n\n**2. Credit Cost Calculation:**\n- Define credit costs per model:\n  - GPT-4o Mini: 0.1 credits\n  - GPT-4o: 1 credit\n  - Claude 3.5 Sonnet: 3 credits\n  - GPT-5/o1: 20 credits\n- Return the credit cost in the API response\n- Frontend will handle deduction\n\n**3. Response Format:**\n- Include `creditCost` in response metadata\n- Streaming still works as before\n- Error handling for invalid models\n\n**4. Validation:**\n- Verify model is valid before making API call\n- Return appropriate error if model not recognized", "type": "feature", "passes": true, "id": 51}, {"description": "**FRONTEND: Credit Deduction and Plan Validation Logic**\n\n**1. Plan-Model Access Matrix:**\n- Define which plans can access which models:\n  - FREE/Start: Only GPT-4o Mini\n  - LITE: GPT-4o Mini, GPT-4o\n  - STANDARD/Creator: GPT-4o Mini, GPT-4o, Claude 3.5 Sonnet\n  - ULTRA/Pro Studio: ALL models including GPT-5/o1\n\n**2. Access Check Function:**\n- Create `canAccessModel(userPlan, modelId)` function\n- Returns true/false based on access matrix\n- Used by dropdown to show/hide locks\n- Used before API call to validate\n\n**3. Credit Deduction Logic:**\n- Before sending message, check if user has enough credits\n- Credit costs: 0.1, 1, 3, or 20 depending on model\n- If not enough credits: Show paywall, don't send\n- After successful response: Deduct credits from balance\n\n**4. UI Feedback:**\n- Show current credit balance near model selector\n- After sending: Show \"-X credits\" animation/feedback\n- Low credits warning when balance < 5\n\n**5. God Mode Warning:**\n- When user selects GPT-5/o1, show toast:\n  - \"‚ö†Ô∏è High Cost Mode: 20 credits per message\"\n  - Toast should be dismissible\n  - Maybe show confirmation dialog first time", "type": "feature", "passes": true, "id": 52}, {"description": "**üöë CRITICAL UI HOTFIX: Header Overlap - Premium Button & User Avatar**\n\n**Problem:** The \"Get Premium\" button is overlapping/touching the User Avatar in the header.\n\n**Fix Required:**\n1. Find ALL header containers across the app where Premium button and Avatar appear together:\n   - Chat interface header\n   - Image Studio header\n   - Motion Lab header\n   - Audio Studio header\n   - Mobile top bar\n\n2. For each header's right-side container:\n   - Apply: `display: flex`\n   - Apply: `align-items: center`\n   - **CRITICAL:** Apply `gap: 1.5rem` (24px) OR use `space-x-6` utility class\n   - Ensure there is VISIBLE WHITESPACE between elements\n\n3. Verify the elements are in correct order:\n   - [Left content] ... [Premium Button] [gap] [User Avatar]\n\n4. Check for any:\n   - Absolute positioning conflicts\n   - Negative margins\n   - Overlapping z-index issues\n   - Fixed widths that cause overflow\n\n5. Test on:\n   - Desktop (full width)\n   - Tablet (medium width)\n   - Mobile (should still have proper spacing)\n\n**The Premium button and Avatar must NOT touch - there must be clear separation.**", "type": "bug", "passes": true, "id": 53}, {"description": "**üîê AUTHENTICATION: Login Gate Overlay**\n\n**Verify/Fix the Login System:**\n\n1. **Login Overlay Must:**\n   - Block ALL access to the app until user signs in\n   - Cover entire screen with dark overlay\n   - Show professional modal in center\n   - Cannot be dismissed/bypassed without logging in\n\n2. **Modal Design:**\n   - Synapse logo at top\n   - Title: \"Welcome to Synapse AI\"\n   - Subtitle: \"The AI platform for creators\"\n   - Input field: \"Enter your email to continue\"\n   - Button: \"Get Started\" (indigo gradient)\n   - Terms text at bottom\n\n3. **Login Logic:**\n   - On submit, validate email format\n   - Save email to localStorage as `user_email`\n   - Save user to `users` array in localStorage:\n     ```\n     users: [{ email, id, createdAt, visits: 1 }]\n     ```\n   - Close modal, show welcome toast\n   - Set `isLoggedIn: true` in auth state\n\n4. **Mock Database for Admin:**\n   - All users stored in `synapse_users` localStorage key\n   - Each user has: email, id, createdAt, lastVisit\n   - Admin can count total unique users\n\n5. **Returning Users:**\n   - Check localStorage for existing user_email on load\n   - If exists, auto-login (don't show modal)\n   - Update lastVisit timestamp", "type": "feature", "passes": true, "id": 54}, {"description": "**üí∞ ADMIN CFO DASHBOARD: Financials Tab**\n\n**Verify/Enhance the Finances Tab in Admin:**\n\n1. **Tab Navigation:**\n   - Ensure \"Finances\" tab exists in admin\n   - Tab icon: DollarSign or TrendingUp\n\n2. **Automatic Metrics Cards:**\n\n   **Revenue Card:**\n   - Calculate from redeemed gift codes/plans\n   - Sum values: LITE=690‚ÇΩ, STANDARD=1890‚ÇΩ, ULTRA=4990‚ÇΩ\n   - Also count credit purchases if any\n   - Display in RUB with ‚ÇΩ symbol\n\n   **Tax Card:**\n   - Auto-calculate 11% of Revenue\n   - Display: \"Tax (11%): X ‚ÇΩ\"\n   - Deducted from revenue\n\n   **Expenses Card:**\n   - Sum of all logged operating costs\n   - Display total\n\n   **Net Profit Card (PROMINENT):**\n   - Formula: (Revenue - Tax) - Expenses\n   - Large display, color coded:\n     - Green if positive\n     - Red if negative\n   - Show as main KPI\n\n3. **Manual Expenses Section:**\n   - Title: \"Operating Costs\"\n   - \"‚ûï Log Server Payment\" button\n   - Modal/form with:\n     - Amount input (number)\n     - Currency selector (USD/RUB)\n     - Name/Description field (e.g., \"OpenRouter Top-up\")\n     - Date (default today)\n   - Save to localStorage: `expenses` array\n   - Display list of expenses with delete option\n   - Running total at bottom\n\n4. **Profit Formula Display:**\n   - Show calculation breakdown:\n   ```\n   Revenue:     +X ‚ÇΩ\n   Tax (11%):   -Y ‚ÇΩ\n   Expenses:    -Z ‚ÇΩ\n   _______________\n   Net Profit:   P ‚ÇΩ\n   ```", "type": "feature", "passes": true, "id": 55}, {"description": "**üö¶ USER TRAFFIC: Visit Counter**\n\n**Implement Simple Traffic Tracking:**\n\n1. **On Every Page Load:**\n   - Increment `totalVisits` counter in localStorage\n   - This should happen in the root/layout component\n   - Increment on mount (useEffect with empty deps)\n\n2. **Storage Structure:**\n   ```\n   localStorage:\n   - synapse_total_visits: number\n   - synapse_daily_visits: { date: count, ... }\n   ```\n\n3. **Admin Dashboard Display:**\n   - Add \"Total Visits\" metric to Overview or Finances tab\n   - Card showing: \"Total Page Views: X\"\n   - Maybe also show \"Today's Visits\" if tracking daily\n\n4. **Implementation:**\n   - Add to Provider component or main layout\n   - Increment counter on app initialization\n   - Read and display in Admin dashboard\n\n5. **Optional Enhancements:**\n   - Unique visits (based on user_id)\n   - Daily/weekly breakdown\n   - Simple sparkline or trend indicator", "type": "feature", "passes": true, "id": 56}, {"description": "**ü©π CRITICAL FIX: Header Overlap - FORCE SEPARATION between Premium Button and User Avatar**\n\n**Problem:** The \"Get Premium\" button is STILL overlapping the User Avatar despite previous fixes.\n\n**Action Required:**\n\n1. Find the PARENT container that holds BOTH:\n   - The \"Get Premium\" / Premium button\n   - The User Avatar / Profile trigger\n\n2. Apply these CSS rules to that parent container:\n   - `display: flex`\n   - `align-items: center`\n   - `justify-content: flex-end`\n   - **`gap: 24px`** (Tailwind: `gap-6`)\n\n3. If they are in SEPARATE containers:\n   - Find the common ancestor\n   - Ensure proper flex layout\n   - Add margin-right to Premium button: `mr-6` (24px)\n   - Or margin-left to Avatar: `ml-6` (24px)\n\n4. Remove any conflicting styles:\n   - Remove absolute positioning that causes overlap\n   - Remove negative margins\n   - Check for fixed widths causing overflow\n\n5. **Visual Requirement:**\n   - There must be AT LEAST 20-24px of visible whitespace between the gold button and the user icon\n   - They must NOT touch or overlap under any circumstance\n\n6. Apply fix to ALL pages:\n   - Chat interface\n   - Image Studio\n   - Motion Lab\n   - Audio Studio\n   - Settings (if applicable)\n   - Mobile views", "type": "bug", "passes": true, "id": 57}, {"description": "**üßπ CLEANUP: Remove Redundant Sidebar Credit Display**\n\n**Problem:** There are TWO credit/usage displays in the Left Sidebar - this is confusing.\n\n**Action Required:**\n\n1. **REMOVE the OLD \"FREE CREDITS\" block:**\n   - This is the legacy code at the bottom of sidebar\n   - It shows progress bars for \"Messages\" and \"Images\"\n   - It's the old usage tracking system\n   - DELETE this entire section/component\n\n2. **KEEP the NEW \"USAGE\" card:**\n   - This shows \"Credits: 10.0\" (or current balance)\n   - This is the correct credit-based system\n   - Has the credit balance number prominently displayed\n\n3. **REPOSITION the USAGE card:**\n   - Move it to the BOTTOM of the sidebar\n   - Position it right ABOVE the \"Upgrade Plan\" button\n   - Layout order should be:\n     - Navigation items (Chat, Image Studio, etc.)\n     - [spacer/flex-grow]\n     - USAGE card (credits display)\n     - Upgrade Plan button\n\n4. **Verify final sidebar structure:**\n   - Logo at top\n   - Navigation tabs in middle\n   - Single credit display near bottom\n   - Upgrade button at very bottom\n   - NO duplicate usage/credit displays", "type": "bug", "passes": true, "id": 58}, {"description": "**‚úÖ VERIFICATION: Clean UI State**\n\n**After fixes, verify these conditions:**\n\n1. **Header (Top Right):**\n   - Premium button and User Avatar have CLEAR VISIBLE SPACE between them\n   - At least 20-24px gap\n   - Both elements are clickable without interference\n   - Works on desktop and mobile\n\n2. **Sidebar (Left):**\n   - Only ONE credit/usage display exists\n   - No duplicate counters\n   - Credit balance is clearly visible\n   - Positioned near bottom, above Upgrade button\n\n3. **Overall Layout:**\n   - No overlapping elements\n   - Clean, professional appearance\n   - Consistent spacing throughout\n\n4. **Test all pages:**\n   - Chat\n   - Image Studio\n   - Motion Lab\n   - Audio Studio\n   - Settings\n\n**If any issues remain, fix them in this task.**", "type": "bug", "passes": true, "id": 59}, {"description": "**ü©π CRITICAL UI FIX: Remove ALL Legacy Credits Display from Sidebar**\n\n**Problem:** There is still an old \"FREE CREDITS\" section with progress bars for \"Messages (0/5)\" and \"Images (0/2)\" in the sidebar.\n\n**Action Required:**\n\n1. **Find and COMPLETELY DELETE:**\n   - Any section showing \"FREE CREDITS\" label\n   - Progress bars for \"Messages\" count\n   - Progress bars for \"Images\" count\n   - The old message/image usage tracking UI\n   - This includes both desktop sidebar AND mobile navigation\n\n2. **What should REMAIN in sidebar bottom:**\n   - ONLY the new \"USAGE\" card showing total credits (e.g., \"10.0 credits\")\n   - The \"Upgrade Plan\" button\n   - Nothing else related to usage/credits\n\n3. **Search in these files:**\n   - `sidebar.tsx` - remove legacy credits section\n   - `mobile-nav.tsx` - remove legacy credits section\n   - Any other component that might have duplicate credit displays\n\n4. **Final sidebar structure:**\n   - Logo at top\n   - Navigation tabs (Chat, Image Studio, Motion Lab, Audio Studio, History, Settings)\n   - [flex spacer]\n   - Single USAGE card (shows credit balance only)\n   - Upgrade Plan button at very bottom\n\n**NO duplicate credit counters, NO progress bars for messages/images.**", "type": "bug", "passes": true, "id": 60}, {"description": "**üë§ NEW FEATURE: Avatar Studio - Navigation Tab**\n\n**Add to Sidebar Navigation:**\n\n1. **New Tab:**\n   - Label: \"Avatar Studio\"\n   - Icon: User icon (from Lucide React)\n   - Position: After \"Audio Studio\", before \"History\"\n\n2. **Add to both:**\n   - Desktop sidebar navigation\n   - Mobile navigation drawer\n\n3. **Tab styling:**\n   - Same style as other navigation tabs\n   - Hover effects\n   - Active state highlighting\n\n4. **Navigation logic:**\n   - Clicking switches main view to Avatar Studio interface\n   - Update activeTab state management to include 'avatar'", "type": "feature", "passes": true, "id": 61}, {"description": "**üë§ NEW FEATURE: Avatar Studio - Full Interface**\n\n**Create Avatar Studio Page (Split View Layout):**\n\n**Header Section:**\n- Headline: \"Create Hyper-Realistic AI Personas\"\n- Subtitle: \"Upload a target face and a driving video to animate the avatar.\"\n- Premium button in top right (like other studios)\n\n**LEFT PANEL (Inputs) - ~45% width:**\n\n**Card 1: Target Face (Image)**\n- Title: \"Target Face\"\n- Subtitle: \"Upload a high-quality portrait photo\"\n- Drag-and-drop upload zone\n- Accepts: JPG, PNG\n- Preview uploaded image\n- Remove/change button\n- Icon: User/Face icon\n- Tips: \"Best results with front-facing, well-lit photos\"\n\n**Card 2: Driving Video (Movement)**\n- Title: \"Driving Video\"\n- Subtitle: \"Upload a video of talking/movement\"\n- Drag-and-drop upload zone\n- Accepts: MP4, MOV, WEBM\n- Preview uploaded video (thumbnail or player)\n- Remove/change button\n- Icon: Video icon\n- **\"üî¥ Record Camera\" button** (mock - shows toast \"Coming soon\")\n- Tips: \"1-10 seconds recommended\"\n\n**RIGHT PANEL (Output) - ~55% width:**\n\n**Video Result Area:**\n- Large placeholder for output video\n- Dark background with subtle border\n- Play button overlay when video ready\n- Empty state: \"Your animated avatar will appear here\"\n- Glassmorphism styling\n\n**Action Button:**\n- Large prominent button: \"‚ö° Animate Persona\"\n- Electric indigo/blue gradient\n- Glow effect on hover\n- Disabled until both inputs uploaded\n- Loading state: \"Processing... This may take a minute\"\n\n**Cost Warning:**\n- Below button: \"Cost: ~30 Credits per generation (Heavy Processing)\"\n- Small, muted text\n- Warning icon\n\n**Recent Generations (optional):**\n- Grid of previous avatar generations\n- Thumbnails with play overlay\n\n**Styling:**\n- Same premium dark theme (#000 background)\n- Glassmorphism for cards\n- Consistent with other studios\n- Responsive layout", "type": "feature", "passes": true, "id": 62}, {"description": "**üë§ BACKEND: Avatar Studio API Stub (`/api/avatar`)**\n\n**Create placeholder API route:**\n\n1. **Route:** `/api/avatar` or `/api/avatar/animate`\n\n2. **Method:** POST\n\n3. **Expected Input:**\n   - `targetImage`: Base64 or file path of face image\n   - `drivingVideo`: Base64 or file path of driving video\n   - `duration`: Optional duration limit\n\n4. **Placeholder Response:**\n   - Return mock success with sample video URL\n   - Or return \"Feature coming soon\" message\n   - Structure for future Replicate integration\n\n5. **Future Integration Notes (in comments):**\n   - Will use Replicate API\n   - Model: `cjwbw/sadtalker` or similar\n   - Alternative: `wav2lip` for lip sync\n   - Cost: ~30 credits (heavy GPU processing)\n\n6. **Credit Cost:**\n   - Define AVATAR_COST = 30 credits\n   - Check user has enough credits before processing\n   - Return creditCost in response\n\n7. **Error Handling:**\n   - Validate both inputs present\n   - User-friendly error messages\n   - \"High load on GPU\" for payment issues", "type": "feature", "passes": true, "id": 63}, {"description": "**–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ì–ê: –ß–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω –≤ Audio Studio -> Voice Lab**\n\n**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ Voice Lab (—Ä–µ–∂–∏–º –≤ Audio Studio) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω.\n\n**–î–µ–π—Å—Ç–≤–∏—è:**\n1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç audio-studio.tsx\n2. –ù–∞–π—Ç–∏ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ \"Music Generator\" –∏ \"Voice Lab\"\n3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Voice Lab UI –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è\n4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:\n   - –ù–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö\n   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç state –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤\n   - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ Voice Lab —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫\n5. –ï—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ª–æ–º–∞–Ω - –∏—Å–ø—Ä–∞–≤–∏—Ç—å\n6. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ –≥–æ—Ç–æ–≤ - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É \"–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ\" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º UI\n7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç undefined/null —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞\n8. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ CSS –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç", "type": "bug", "passes": true, "id": 64}, {"description": "**–õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø: –ü–µ—Ä–µ–≤–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫**\n\n**–ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:**\n- –û—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º: \"Synapse\", –Ω–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π (GPT-4, GPT-4o, Claude, Midjourney, Veo, ElevenLabs –∏ —Ç.–¥.)\n- –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\n\n**–°–∞–π–¥–±–∞—Ä –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**\n- Chat ‚Üí –ß–∞—Ç\n- Image Studio ‚Üí –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è  \n- Motion Lab ‚Üí –í–∏–¥–µ–æ\n- Audio Studio ‚Üí –ê—É–¥–∏–æ\n- Avatar Studio ‚Üí –ê–≤–∞—Ç–∞—Ä—ã\n- History ‚Üí –ò—Å—Ç–æ—Ä–∏—è\n- Settings ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n\n**–ö–Ω–æ–ø–∫–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã:**\n- Upgrade Plan ‚Üí –£–ª—É—á—à–∏—Ç—å —Ç–∞—Ä–∏—Ñ\n- Credits ‚Üí –ö—Ä–µ–¥–∏—Ç—ã\n- Sign Out / Logout ‚Üí –í—ã–π—Ç–∏\n- Get Premium ‚Üí –ü—Ä–µ–º–∏—É–º\n- Generate ‚Üí –°–æ–∑–¥–∞—Ç—å/–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å\n- Download ‚Üí –°–∫–∞—á–∞—Ç—å\n- Delete ‚Üí –£–¥–∞–ª–∏—Ç—å\n- Copy ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å\n- Send ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å\n- Cancel ‚Üí –û—Ç–º–µ–Ω–∞\n- Save ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n- Settings ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n- Account ‚Üí –ê–∫–∫–∞—É–Ω—Ç\n\n**–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:**\n- \"Message Synapse...\" ‚Üí \"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\"\n- \"Describe your image...\" ‚Üí \"–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...\"\n- \"Describe your video...\" ‚Üí \"–û–ø–∏—à–∏—Ç–µ –≤–∏–¥–µ–æ...\"\n- \"Enter your email...\" ‚Üí \"–í–≤–µ–¥–∏—Ç–µ email...\"\n- –ò –¥—Ä—É–≥–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏\n\n**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏:**\n- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü\n- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏\n- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö\n- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n\n**–§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**\n- sidebar.tsx\n- mobile-nav.tsx\n- chat-interface.tsx\n- image-studio.tsx\n- motion-lab.tsx\n- audio-studio.tsx\n- avatar-studio.tsx\n- settings-page.tsx\n- paywall-modal.tsx\n- auth-modal.tsx (auth-context.tsx)\n- user-avatar.tsx\n- model-selector.tsx\n- –ò –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º", "type": "feature", "passes": true, "id": 65}, {"description": "**–§–£–ù–ö–¶–ò–û–ù–ê–õ: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ \"–ò—Å—Ç–æ—Ä–∏—è\" (History)**\n\n**–ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–∞–±–æ—á—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:**\n\n**1. Layout —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**\n- –ó–∞–≥–æ–ª–æ–≤–æ–∫: \"–ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π\"\n- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: \"–í—Å–µ –≤–∞—à–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã\"\n- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É: –í—Å–µ, –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –í–∏–¥–µ–æ, –ê—É–¥–∏–æ, –ß–∞—Ç\n- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ)\n\n**2. –ö–∞—Ä—Ç–æ—á–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏:**\n- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞:\n  - –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: –ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç–∏–Ω–∫–∏\n  - –î–ª—è –≤–∏–¥–µ–æ: –ø—Ä–µ–≤—å—é –∫–∞–¥—Ä –∏–ª–∏ –≤–∏–¥–µ–æ –ø–ª–µ–µ—Ä\n  - –î–ª—è –∞—É–¥–∏–æ: –∏–∫–æ–Ω–∫–∞ + –º–∏–Ω–∏-–ø–ª–µ–µ—Ä\n  - –î–ª—è —á–∞—Ç–∞: –∏–∫–æ–Ω–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\n- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\n  - –¢–∏–ø –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (badge: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ/–í–∏–¥–µ–æ/–ê—É–¥–∏–æ/–ß–∞—Ç)\n  - –ü—Ä–æ–º–ø—Ç (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –¥–æ ~100 —Å–∏–º–≤–æ–ª–æ–≤, —Å \"...\")\n  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å\n  - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏\n  - –ü–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã\n\n**3. –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:**\n- \"–°–∫–∞—á–∞—Ç—å\" - —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª\n- \"–£–¥–∞–ª–∏—Ç—å\" - —É–¥–∞–ª—è–µ—Ç –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)\n- \"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å\" - –∫–æ–ø–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—É–¥–∏—é\n- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è—Ö\n\n**4. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**\n- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localStorage: `synapse_history`\n- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: [{ id, type, prompt, model, result, createdAt, credits }]\n- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ –ª—é–±–æ–π —Å—Ç—É–¥–∏–∏ - –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é\n\n**5. –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**\n- –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞: \"–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–π\"\n- –ö–Ω–æ–ø–∫–∞ \"–ù–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å\" -> –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ß–∞—Ç\n\n**6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**\n- –û–±–Ω–æ–≤–∏—Ç—å chat-interface.tsx - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞\n- –û–±–Ω–æ–≤–∏—Ç—å image-studio.tsx - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π\n- –û–±–Ω–æ–≤–∏—Ç—å motion-lab.tsx - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–∏–¥–µ–æ\n- –û–±–Ω–æ–≤–∏—Ç—å audio-studio.tsx - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞—É–¥–∏–æ\n\n**7. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:**\n- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –∫–∞–∫ –≤–µ–∑–¥–µ\n- Glassmorphism –∫–∞—Ä—Ç–æ—á–∫–∏\n- Grid –∏–ª–∏ List view\n- Responsive –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö", "type": "feature", "passes": true, "id": 66}, {"description": "**–ü–û–õ–ù–ê–Ø –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø: –ü–µ—Ä–µ–≤–æ–¥ –í–°–ï–• –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ —Ä—É—Å—Å–∫–∏–π**\n\n**–ü–†–ê–í–ò–õ–û:** –û—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –¢–û–õ–¨–ö–û:\n- \"Synapse\" (–Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞)\n- –ù–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π: GPT-4, GPT-4o, Claude, Midjourney, Stable Diffusion, ElevenLabs, Flux, Veo, Kling –∏ —Ç.–¥.\n\n**–í–°–Å –û–°–¢–ê–õ–¨–ù–û–ï - –Ω–∞ —Ä—É—Å—Å–∫–∏–π:**\n\n**1. –ú–ï–ù–Æ –ò –ù–ê–í–ò–ì–ê–¶–ò–Ø:**\n- Home ‚Üí –ì–ª–∞–≤–Ω–∞—è\n- Community ‚Üí –°–æ–æ–±—â–µ—Å—Ç–≤–æ\n- Profile ‚Üí –ü—Ä–æ—Ñ–∏–ª—å\n- Dashboard ‚Üí –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\n- Explore ‚Üí –û–±–∑–æ—Ä\n- Favorites ‚Üí –ò–∑–±—Ä–∞–Ω–Ω–æ–µ\n- Recent ‚Üí –ù–µ–¥–∞–≤–Ω–∏–µ\n- All ‚Üí –í—Å–µ\n- Filter ‚Üí –§–∏–ª—å—Ç—Ä\n\n**2. –ò–ù–¢–ï–†–§–ï–ô–° –ì–ï–ù–ï–†–ê–¶–ò–ò (placeholders):**\n- \"Describe what you want to see...\" ‚Üí \"–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å...\"\n- \"Enter your prompt...\" ‚Üí \"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∑–∞–ø—Ä–æ—Å...\"\n- \"Type a message...\" ‚Üí \"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\"\n- \"Search...\" ‚Üí \"–ü–æ–∏—Å–∫...\"\n- \"Upload image...\" ‚Üí \"–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...\"\n- \"Drag and drop...\" ‚Üí \"–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞...\"\n\n**3. –ù–ê–°–¢–†–û–ô–ö–ò –ì–ï–ù–ï–†–ê–¶–ò–ò:**\n- Aspect Ratio ‚Üí –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω\n- Style ‚Üí –°—Ç–∏–ª—å\n- Negative Prompt ‚Üí –ò—Å–∫–ª—é—á–∏—Ç—å (Negative)\n- Quality ‚Üí –ö–∞—á–µ—Å—Ç–≤–æ\n- Steps ‚Üí –®–∞–≥–∏\n- Seed ‚Üí –°–∏–¥\n- Guidance ‚Üí –í–ª–∏—è–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞\n- Sampler ‚Üí –°—ç–º–ø–ª–µ—Ä\n- Model ‚Üí –ú–æ–¥–µ–ª—å\n- Resolution ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ\n- Duration ‚Üí –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å\n- Format ‚Üí –§–æ—Ä–º–∞—Ç\n\n**4. –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô:**\n- Generate ‚Üí –°–æ–∑–¥–∞—Ç—å\n- Download ‚Üí –°–∫–∞—á–∞—Ç—å\n- Upscale ‚Üí –£–ª—É—á—à–∏—Ç—å\n- Enhance ‚Üí –£–ª—É—á—à–∏—Ç—å\n- Edit ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\n- Delete ‚Üí –£–¥–∞–ª–∏—Ç—å\n- Copy ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å\n- Share ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è\n- Save ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n- Cancel ‚Üí –û—Ç–º–µ–Ω–∞\n- Confirm ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å\n- Submit ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å\n- Apply ‚Üí –ü—Ä–∏–º–µ–Ω–∏—Ç—å\n- Reset ‚Üí –°–±—Ä–æ—Å–∏—Ç—å\n- Retry ‚Üí –ü–æ–≤—Ç–æ—Ä–∏—Ç—å\n- Close ‚Üí –ó–∞–∫—Ä—ã—Ç—å\n- Back ‚Üí –ù–∞–∑–∞–¥\n- Next ‚Üí –î–∞–ª–µ–µ\n- Previous ‚Üí –ù–∞–∑–∞–¥\n- More ‚Üí –ï—â—ë\n- Less ‚Üí –ú–µ–Ω—å—à–µ\n- Show ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å\n- Hide ‚Üí –°–∫—Ä—ã—Ç—å\n- Expand ‚Üí –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å\n- Collapse ‚Üí –°–≤–µ—Ä–Ω—É—Ç—å\n\n**5. –°–¢–ê–¢–£–°–´ –ò –°–û–û–ë–©–ï–ù–ò–Ø:**\n- Loading... ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞...\n- Generating... ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ...\n- Processing... ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞...\n- Uploading... ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞...\n- Success ‚Üí –£—Å–ø–µ—à–Ω–æ\n- Error ‚Üí –û—à–∏–±–∫–∞\n- Failed ‚Üí –ù–µ —É–¥–∞–ª–æ—Å—å\n- Complete ‚Üí –ì–æ—Ç–æ–≤–æ\n- Pending ‚Üí –û–∂–∏–¥–∞–Ω–∏–µ\n- In progress ‚Üí –í –ø—Ä–æ—Ü–µ—Å—Å–µ\n- Ready ‚Üí –ì–æ—Ç–æ–≤–æ\n\n**6. –û–®–ò–ë–ö–ò –ò –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:**\n- \"Something went wrong\" ‚Üí \"–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫\"\n- \"Please try again\" ‚Üí \"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞\"\n- \"Invalid input\" ‚Üí \"–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥\"\n- \"Required field\" ‚Üí \"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ\"\n- \"File too large\" ‚Üí \"–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π\"\n- \"Unsupported format\" ‚Üí \"–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç\"\n- \"Connection error\" ‚Üí \"–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\"\n- \"Not enough credits\" ‚Üí \"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤\"\n\n**7. –ò–ù–¢–ï–†–§–ï–ô–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:**\n- Account ‚Üí –ê–∫–∫–∞—É–Ω—Ç\n- Settings ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n- Preferences ‚Üí –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è\n- Notifications ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n- Privacy ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n- Security ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å\n- Billing ‚Üí –û–ø–ª–∞—Ç–∞\n- Subscription ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞\n- Plan ‚Üí –¢–∞—Ä–∏—Ñ\n- Usage ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ\n- Credits ‚Üí –ö—Ä–µ–¥–∏—Ç—ã\n- Balance ‚Üí –ë–∞–ª–∞–Ω—Å\n\n**–§–ê–ô–õ–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –ò –û–ë–ù–û–í–õ–ï–ù–ò–Ø:**\n- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ /src/web/components/\n- image-studio.tsx - –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ placeholders\n- motion-lab.tsx - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ\n- audio-studio.tsx - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏–æ\n- avatar-studio.tsx - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤\n- chat-interface.tsx - placeholders –∏ —Å–æ–æ–±—â–µ–Ω–∏—è\n- settings-page.tsx - –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫\n- paywall-modal.tsx - —Ç–∞—Ä–∏—Ñ—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏\n- model-selector.tsx - –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π (–Ω–æ –Ω–µ –Ω–∞–∑–≤–∞–Ω–∏—è!)\n- history-page.tsx - —Ñ–∏–ª—å—Ç—Ä—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è\n- –í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", "type": "feature", "passes": true, "id": 67}, {"description": "**–ë–ê–ó–ê –î–ê–ù–ù–´–•: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã Drizzle + D1**\n\n**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª `/src/api/database/schema.ts`:**\n\n```typescript\nimport { sqliteTable, text, integer, real } from \"drizzle-orm/sqlite-core\"\n\n// –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\nexport const users = sqliteTable(\"users\", {\n  id: text(\"id\").primaryKey(), // UUID\n  email: text(\"email\").notNull().unique(),\n  name: text(\"name\"),\n  avatarUrl: text(\"avatar_url\"),\n  plan: text(\"plan\").default(\"free\"), // free, lite, standard, ultra\n  creditBalance: real(\"credit_balance\").default(10.0),\n  createdAt: integer(\"created_at\", { mode: \"timestamp\" }).notNull().$defaultFn(() => new Date()),\n  lastLoginAt: integer(\"last_login_at\", { mode: \"timestamp\" }),\n})\n\n// –¢–∞–±–ª–∏—Ü–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (–∏—Å—Ç–æ—Ä–∏—è)\nexport const generations = sqliteTable(\"generations\", {\n  id: text(\"id\").primaryKey(), // UUID\n  userId: text(\"user_id\").notNull().references(() => users.id),\n  type: text(\"type\").notNull(), // image, video, audio, chat, avatar, enhance\n  prompt: text(\"prompt\"),\n  model: text(\"model\"), // –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å\n  resultUrl: text(\"result_url\"), // URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ/–≤–∏–¥–µ–æ/–∞—É–¥–∏–æ)\n  resultData: text(\"result_data\"), // JSON —Å –¥–æ–ø. –¥–∞–Ω–Ω—ã–º–∏\n  creditsUsed: real(\"credits_used\").default(0),\n  status: text(\"status\").default(\"completed\"), // pending, processing, completed, failed\n  createdAt: integer(\"created_at\", { mode: \"timestamp\" }).notNull().$defaultFn(() => new Date()),\n})\n\n// –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥–∞—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤\nexport const giftCodes = sqliteTable(\"gift_codes\", {\n  id: text(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(),\n  type: text(\"type\").notNull(), // credits, plan\n  value: text(\"value\").notNull(), // \"500\" –∏–ª–∏ \"STANDARD\"\n  status: text(\"status\").default(\"active\"), // active, redeemed, expired\n  redeemedBy: text(\"redeemed_by\").references(() => users.id),\n  redeemedAt: integer(\"redeemed_at\", { mode: \"timestamp\" }),\n  createdAt: integer(\"created_at\", { mode: \"timestamp\" }).notNull().$defaultFn(() => new Date()),\n})\n\n// –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ (–¥–ª—è –∞–¥–º–∏–Ω–∞)\nexport const expenses = sqliteTable(\"expenses\", {\n  id: text(\"id\").primaryKey(),\n  amount: real(\"amount\").notNull(),\n  currency: text(\"currency\").default(\"RUB\"),\n  service: text(\"service\").notNull(), // OpenRouter, Replicate, Vercel, etc.\n  description: text(\"description\"),\n  createdAt: integer(\"created_at\", { mode: \"timestamp\" }).notNull().$defaultFn(() => new Date()),\n})\n```\n\n**–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:**\n- –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `/src/api/migrations/` –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\n- –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `0001_init.sql` —Å CREATE TABLE statements", "type": "feature", "passes": true, "id": 68}, {"description": "**–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï AUDIO STUDIO: –ß–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω –≤ Voice Lab**\n\n**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ Voice Lab –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω.\n\n**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ audio-studio.tsx:**\n\n1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ Voice Lab —Ä–µ–∂–∏–º–∞:**\n   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `mode === 'voice'` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ JSX –¥–ª—è Voice Lab –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null/undefined\n\n2. **–î–æ–±–∞–≤–∏—Ç—å Error Boundary:**\n   - –û–±–µ—Ä–Ω—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ try-catch –∏–ª–∏ Error Boundary\n   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å fallback UI –ø—Ä–∏ –æ—à–∏–±–∫–µ\n\n3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã/–æ–±—ä–µ–∫—Ç—ã –Ω–µ –ª–æ–º–∞—é—Ç —Ä–µ–Ω–¥–µ—Ä\n   - –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è\n\n4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å state –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:**\n   - selectedVoice –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n   - clonedVoices –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å [] –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n\n5. **–î–æ–±–∞–≤–∏—Ç—å loading state:**\n   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–∫–µ–ª–µ—Ç–æ–Ω/—Å–ø–∏–Ω–Ω–µ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n\n6. **–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Voice Lab UI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è:**\n   - –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞\n   - Dropdown –≤—ã–±–æ—Ä–∞ –≥–æ–ª–æ—Å–∞\n   - –ö–Ω–æ–ø–∫–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–∞\n   - –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏", "type": "bug", "passes": true, "id": 69}, {"description": "**API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è API –∫–ª—é—á–µ–π**\n\n**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API routes –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ env:**\n\n1. **chat.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.AI_GATEWAY_API_KEY` –∏ `env.AI_GATEWAY_BASE_URL`\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ createOpenAI\n\n2. **image.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.OPENROUTER_API_KEY`\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Authorization header\n\n3. **video.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.REPLICATE_API_TOKEN`\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Replicate\n\n4. **audio.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.REPLICATE_API_TOKEN`\n   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å music –∏ tts endpoints\n\n5. **enhance.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.REPLICATE_API_TOKEN`\n\n6. **avatar.ts:**\n   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `env.REPLICATE_API_TOKEN`\n\n**–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ:**\n- –í—Å–µ routes –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ API –∫–ª—é—á–µ–π –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º\n- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ –∫–ª—é—á –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\n- –ö–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å—ã\n\n**–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (dev only):**\n- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –≤—ã–∑–æ–≤—ã API\n- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –¥–µ–±–∞–≥–∞", "type": "feature", "passes": true, "id": 70}, {"description": "**–≠–ö–û–ù–û–ú–ò–ö–ê: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏ Lava 12%**\n\n**1. –û–±–Ω–æ–≤–∏—Ç—å Paywall Modal —Å –Ω–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏:**\n\n–ü–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤ (–≤–º–µ—Å—Ç–æ –ø–æ–¥–ø–∏—Å–æ–∫):\n\n**–ü–∞–∫–µ—Ç \"START\":**\n- 100 –∫—Ä–µ–¥–∏—Ç–æ–≤ = 590 ‚ÇΩ\n- –î–æ—Å—Ç—É–ø: GPT-4o Mini, Flux –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\n- –û–ø–∏—Å–∞–Ω–∏–µ: \"–î–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞\"\n\n**–ü–∞–∫–µ—Ç \"CREATOR\" (–ü–æ–ø—É–ª—è—Ä–Ω—ã–π):**\n- 500 –∫—Ä–µ–¥–∏—Ç–æ–≤ = 2 490 ‚ÇΩ\n- –î–æ—Å—Ç—É–ø: GPT-4o, Claude, Nana Banana, –º—É–∑—ã–∫–∞\n- –û–ø–∏—Å–∞–Ω–∏–µ: \"–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫—Ä–µ–∞—Ç–æ—Ä–æ–≤\"\n- Badge: \"–ü–æ–ø—É–ª—è—Ä–Ω—ã–π\"\n\n**–ü–∞–∫–µ—Ç \"PRO STUDIO\":**\n- 1500 –∫—Ä–µ–¥–∏—Ç–æ–≤ = 5 990 ‚ÇΩ\n- –î–æ—Å—Ç—É–ø: –í—Å–µ –º–æ–¥–µ–ª–∏, –≤–∏–¥–µ–æ (Veo/Kling), –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞, –∞–≤–∞—Ç–∞—Ä—ã\n- –û–ø–∏—Å–∞–Ω–∏–µ: \"–î–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤\"\n- Badge: \"Pro\"\n\n**–ü–∞–∫–µ—Ç \"UNLIMITED\" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**\n- 5000 –∫—Ä–µ–¥–∏—Ç–æ–≤ = 14 990 ‚ÇΩ\n- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ + –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞\n\n**2. –û–±–Ω–æ–≤–∏—Ç—å UI:**\n- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ü–µ–Ω—É –∑–∞ –∫—Ä–µ–¥–∏—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä \"5.9 ‚ÇΩ/–∫—Ä–µ–¥–∏—Ç\")\n- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—ã–≥–æ–¥—É –Ω–∞ –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö (\"–≠–∫–æ–Ω–æ–º–∏—è 20%\")\n- –ö–Ω–æ–ø–∫–∏: \"–ö—É–ø–∏—Ç—å\" –≤–º–µ—Å—Ç–æ \"Subscribe\"\n\n**3. –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ö–µ–º—É –ë–î:**\n- –¢–∞–±–ª–∏—Ü–∞ `payments` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π\n- –ü–æ–ª—è: id, user_id, amount, credits, status, lava_id, created_at", "type": "feature", "passes": true, "id": 71}, {"description": "**–ê–î–ú–ò–ù: –†–∞–∑–¥–µ–ª \"–§–∏–Ω–∞–Ω—Å—ã\" —Å —Ñ–æ—Ä–º—É–ª–æ–π —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏**\n\n**–û–±–Ω–æ–≤–∏—Ç—å Admin Dashboard (–≤–∫–ª–∞–¥–∫–∞ –§–∏–Ω–∞–Ω—Å—ã):**\n\n**1. –ë–ª–æ–∫ \"–î–æ—Ö–æ–¥—ã\":**\n- –°—É–º–º–∞ –æ–ø–ª–∞—Ç (–≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ Lava)\n- –ö–æ–º–∏—Å—Å–∏—è Lava: 12%\n- –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ = –°—É–º–º–∞ –æ–ø–ª–∞—Ç - 12%\n\n**2. –ë–ª–æ–∫ \"–†–∞—Å—Ö–æ–¥—ã API\":**\n- –ó–∞—Ç—Ä–∞—Ç—ã OpenRouter (—á–∞—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)\n- –ó–∞—Ç—Ä–∞—Ç—ã Replicate (–≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –∞–≤–∞—Ç–∞—Ä—ã)\n- –ò—Ç–æ–≥–æ API –∑–∞—Ç—Ä–∞—Ç—ã\n\n**3. –ë–ª–æ–∫ \"–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å\" (–ì–õ–ê–í–ù–´–ô):**\n- –§–æ—Ä–º—É–ª–∞: `–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å = (–°—É–º–º–∞ –æ–ø–ª–∞—Ç - 12% Lava) - –ó–∞—Ç—Ä–∞—Ç—ã API - –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã`\n- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ ‚ÇΩ –∏ $\n- –ó–µ–ª–µ–Ω—ã–π –µ—Å–ª–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è, –∫—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è\n\n**4. –í–∏–∑—É–∞–ª—å–Ω—ã–π –±—Ä–µ–π–∫–¥–∞—É–Ω:**\n```\n–í–∞–ª–æ–≤—ã–π –¥–æ—Ö–æ–¥:        +XX XXX ‚ÇΩ\n–ö–æ–º–∏—Å—Å–∏—è Lava (12%):   -X XXX ‚ÇΩ\n–ó–∞—Ç—Ä–∞—Ç—ã OpenRouter:     -X XXX ‚ÇΩ\n–ó–∞—Ç—Ä–∞—Ç—ã Replicate:      -X XXX ‚ÇΩ\n–ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã:        -X XXX ‚ÇΩ\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n–ß–ò–°–¢–ê–Ø –ü–†–ò–ë–´–õ–¨:       XX XXX ‚ÇΩ\n```\n\n**5. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –∫–æ–¥–µ:**\n- LAVA_COMMISSION = 0.12 (12%)\n- USD_TO_RUB = 90 (–∫—É—Ä—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ API –∑–∞—Ç—Ä–∞—Ç)", "type": "feature", "passes": true, "id": 72}, {"description": "**API: –°–æ–∑–¥–∞–Ω–∏–µ webhook –¥–ª—è Lava `/api/webhook/lava`**\n\n**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API route:**\n\n**–§–∞–π–ª: `/src/api/routes/webhook.ts`**\n\n```typescript\nimport { Hono } from \"hono\"\n\nexport const webhookRoutes = new Hono()\n\n// –ü–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤\nconst CREDIT_PACKAGES = {\n  'start': { credits: 100, price: 590 },\n  'creator': { credits: 500, price: 2490 },\n  'pro_studio': { credits: 1500, price: 5990 },\n  'unlimited': { credits: 5000, price: 14990 },\n}\n\n// Lava Webhook\nwebhookRoutes.post(\"/lava\", async (c) => {\n  try {\n    const body = await c.req.json()\n    \n    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (dev only)\n    if (import.meta.env.DEV) {\n      console.log('[Lava Webhook] Received:', body)\n    }\n    \n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞\n    const { status, order_id, amount, custom_fields } = body\n    \n    if (status !== 'success') {\n      return c.json({ success: false, message: '–ü–ª–∞—Ç–µ–∂ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω' })\n    }\n    \n    // –ò–∑–≤–ª–µ–∫–∞–µ–º user_id –∏ package –∏–∑ custom_fields\n    const userId = custom_fields?.user_id\n    const packageId = custom_fields?.package_id\n    \n    if (!userId || !packageId) {\n      return c.json({ success: false, message: '–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' }, 400)\n    }\n    \n    // –ù–∞—Ö–æ–¥–∏–º –ø–∞–∫–µ—Ç\n    const creditPackage = CREDIT_PACKAGES[packageId]\n    if (!creditPackage) {\n      return c.json({ success: false, message: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∞–∫–µ—Ç' }, 400)\n    }\n    \n    // TODO: –ù–∞—á–∏—Å–ª–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –ë–î\n    // await db.update(users)\n    //   .set({ creditBalance: sql`credit_balance + ${creditPackage.credits}` })\n    //   .where(eq(users.id, userId))\n    \n    // TODO: –ó–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞—Ç–µ–∂ –≤ –∏—Å—Ç–æ—Ä–∏—é\n    // await db.insert(payments).values({\n    //   id: crypto.randomUUID(),\n    //   userId,\n    //   amount: creditPackage.price,\n    //   credits: creditPackage.credits,\n    //   status: 'completed',\n    //   lavaOrderId: order_id,\n    //   createdAt: new Date()\n    // })\n    \n    if (import.meta.env.DEV) {\n      console.log(`[Lava Webhook] –ù–∞—á–∏—Å–ª–µ–Ω–æ ${creditPackage.credits} –∫—Ä–µ–¥–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${userId}`)\n    }\n    \n    return c.json({ \n      success: true, \n      message: `–ù–∞—á–∏—Å–ª–µ–Ω–æ ${creditPackage.credits} –∫—Ä–µ–¥–∏—Ç–æ–≤` \n    })\n    \n  } catch (error) {\n    console.error('[Lava Webhook] Error:', error)\n    return c.json({ success: false, message: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞' }, 500)\n  }\n})\n```\n\n**–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–º api/index.ts:**\n- import { webhookRoutes } from \"./routes/webhook\"\n- app.route(\"/api/webhook\", webhookRoutes)\n\n**–î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ö–µ–º—É –ë–î —Ç–∞–±–ª–∏—Ü—É payments:**\n```typescript\nexport const payments = sqliteTable(\"payments\", {\n  id: text(\"id\").primaryKey(),\n  userId: text(\"user_id\").notNull().references(() => users.id),\n  amount: real(\"amount\").notNull(), // —Å—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö\n  credits: integer(\"credits\").notNull(), // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤\n  status: text(\"status\").default(\"pending\"), // pending, completed, failed, refunded\n  lavaOrderId: text(\"lava_order_id\"),\n  createdAt: integer(\"created_at\", { mode: \"timestamp\" }).notNull().$defaultFn(() => new Date()),\n})\n```", "type": "feature", "passes": true, "id": 73}]
