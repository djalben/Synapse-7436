# üîç –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç Synapse AI Platform
## –û—Ç—á–µ—Ç –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 6 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í–µ—Ä—Å–∏—è:** 2.0

---

## üìä –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

| –í–∫–ª–∞–¥–∫–∞ | –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ | –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ | –ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–æ–π | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|-------------------|---------------|------------------------|-----------|
| **–ß–∞—Ç (/chat)** | üü¢ **85%** | ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ OpenRouter<br>‚úÖ –ú–æ–¥–µ–ª–∏: DeepSeek R1, GPT-4o, Claude 3.5, o1<br>‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç<br>‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage | ‚ö†Ô∏è –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ë–î (—Ç–æ–ª—å–∫–æ localStorage)<br>‚ö†Ô∏è –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ D1 database | üî¥ –í—ã—Å–æ–∫–∏–π |
| **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (/images)** | üü¢ **90%** | ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã: Flux.1-schnell, Gemini 2.0<br>‚úÖ Image-to-Image —Ä–∞–±–æ—Ç–∞–µ—Ç<br>‚úÖ Nana Banana (niji-v6) —á–µ—Ä–µ–∑ OpenRouter<br>‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è | ‚ö†Ô∏è Kandinsky 3.1 –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Ç–æ–ª—å–∫–æ Flux)<br>‚ö†Ô∏è –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î | üî¥ –í—ã—Å–æ–∫–∏–π |
| **–í–∏–¥–µ–æ (/video)** | üü° **60%** | ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã<br>‚úÖ Replicate –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞<br>‚úÖ Text-to-Video –∏ Image-to-Video<br>‚úÖ Portrait Animation (Bring Photos to Life) | ‚ùå **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç sample videos** (fallback)<br>‚ùå Replicate API Token –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω<br>‚ùå Kling AI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω | üü† –°—Ä–µ–¥–Ω–∏–π |
| **–ê—É–¥–∏–æ (/audio)** | üî¥ **30%** | ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã<br>‚úÖ Replicate MusicGen –≥–æ—Ç–æ–≤<br>‚úÖ Hugging Face TTS –≥–æ—Ç–æ–≤<br>‚úÖ Voice cloning –≥–æ—Ç–æ–≤ | ‚ùå **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥–ª—É—à–∫–∞** - –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ API<br>‚ùå `handleGenerate` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `setTimeout(3000)`<br>‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `/sample-audio.mp3` | üî¥ –í—ã—Å–æ–∫–∏–π |
| **–ê–≤–∞—Ç–∞—Ä—ã (/avatars)** | üü° **70%** | ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç<br>‚úÖ FormData –æ—Ç–ø—Ä–∞–≤–∫–∞<br>‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç –≥–æ—Ç–æ–≤<br>‚úÖ Replicate SadTalker –≥–æ—Ç–æ–≤ | ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç sample videos –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞<br>‚ùå Replicate API Token –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω<br>‚ùå –ú–æ–¥–µ–ª—å –≤–µ—Ä—Å–∏—è - placeholder | üü† –°—Ä–µ–¥–Ω–∏–π |
| **–ò—Å—Ç–æ—Ä–∏—è (/history)** | üü¢ **95%** | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞<br>‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage<br>‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –í—Å–µ, –ß–∞—Ç—ã, –ì–∞–ª–µ—Ä–µ—è, –ú–µ–¥–∏–∞<br>‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç<br>‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ/–Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ localStorage, –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –ë–î<br>‚ö†Ô∏è –õ–∏–º–∏—Ç 100 –∑–∞–ø–∏—Å–µ–π | üü¢ –ù–∏–∑–∫–∏–π |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (/settings)** | üü¢ **90%** | ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç<br>‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è<br>‚úÖ –¢–∞—Ä–∏—Ñ—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è<br>‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | ‚ö†Ô∏è –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Lava –¥–ª—è –æ–ø–ª–∞—Ç—ã<br>‚ö†Ô∏è –ü—Ä–æ–º–æ–∫–æ–¥—ã —Ç–æ–ª—å–∫–æ –≤ localStorage | üü† –°—Ä–µ–¥–Ω–∏–π |

---

## üîë –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API-–∫–ª—é—á–∏ –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### ‚úÖ –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (—Ç—Ä–µ–±—É—é—Ç —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–π)

#### 1. **OpenRouter API** (Chat & Images)
- **–ö–ª—é—á:** `OPENROUTER_API_KEY` –∏–ª–∏ `AI_GATEWAY_API_KEY`
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://openrouter.ai/keys
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
  - –ß–∞—Ç: –≤—Å–µ –º–æ–¥–µ–ª–∏ (DeepSeek R1, GPT-4o, Claude 3.5, o1)
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: Flux.1-schnell, Gemini 2.0 (Image-to-Image)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∫–ª—é—á
- **–§–∞–π–ª:** `src/api/routes/chat.ts`, `src/api/routes/image.ts`

#### 2. **Replicate API** (Video, Audio, Avatars, Enhance)
- **–ö–ª—é—á:** `REPLICATE_API_TOKEN`
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://replicate.com/account/api-tokens
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
  - –í–∏–¥–µ–æ: Luma Dream Machine (`luma/ray`)
  - –ê—É–¥–∏–æ: MusicGen Large, XTTS-v2
  - –ê–≤–∞—Ç–∞—Ä—ã: SadTalker (placeholder –≤–µ—Ä—Å–∏—è)
  - Enhance: CodeFormer, DeOldify, GFPGAN
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
- **–§–∞–π–ª—ã:** 
  - `src/api/routes/video.ts`
  - `src/api/routes/audio.ts`
  - `src/api/routes/avatar.ts`
  - `src/api/routes/enhance.ts`

#### 3. **Hugging Face API** (–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –æ–∑–≤—É—á–∫–∞)
- **–ö–ª—é—á:** `HUGGINGFACE_API_KEY` –∏–ª–∏ `HF_API_TOKEN`
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://huggingface.co/settings/tokens
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** TTS (facebook/mms-tts-eng)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å—Ç—å fallback –Ω–∞ Replicate
- **–§–∞–π–ª:** `src/api/routes/audio.ts`

---

### ‚ùå –¢—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### 4. **Lava Business API** (–ü–ª–∞—Ç–µ–∂–∏)
- **–ö–ª—é—á:** `LAVA_SECRET_KEY` –∏ `LAVA_SHOP_ID`
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://lava.ru/business (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ò–ü)
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
  1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤:**
     - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `POST https://api.lava.ru/business/invoice/create`
     - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `sum` (RUB), `orderId`, `customFields` (user_id, package_id)
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `invoiceUrl` –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
  2. **Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
     - –£–∂–µ –µ—Å—Ç—å: `src/api/routes/webhook.ts` ‚Üí `/api/webhook/lava`
     - ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ë–î
     - –ù—É–∂–Ω–æ: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ D1 database
  3. **–ö—Ä–∏–ø—Ç–æ-–º–æ—Å—Ç:**
     - –°–ø–∏—Å–∞–Ω–∏–µ —Å –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∞ Lava –¥–ª—è –æ–ø–ª–∞—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö API
     - –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Lava
- **–°—Ç–∞—Ç—É—Å:** üü° Webhook –≥–æ—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–§–∞–π–ª—ã:**
  - `src/web/components/paywall-modal.tsx` (—Å—Ç—Ä–æ–∫–∞ 312: –∑–∞–≥–ª—É—à–∫–∞)
  - `src/api/routes/webhook.ts` (—Å—Ç—Ä–æ–∫–∏ 94-117: TODO –¥–ª—è –ë–î)

#### 5. **Kling AI API** (–í–∏–¥–µ–æ - –ø—Ä–µ–º–∏—É–º)
- **–ö–ª—é—á:** `KLING_AI_API_KEY`
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://www.klingai.com (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ 2-—Å–µ–∫—É–Ω–¥–Ω—ã–µ –ø—Ä–µ–≤—å—é –≤–∏–¥–µ–æ
- **–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Replicate fallback
- **–§–∞–π–ª:** `src/api/routes/video.ts` (—Å—Ç—Ä–æ–∫–∞ 23: —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –Ω–æ –Ω–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

#### 6. **Kandinsky 3.1 API** (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- **–ö–ª—é—á:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—á–µ—Ä–µ–∑ OpenRouter –∏–ª–∏ –ø—Ä—è–º–æ–π API)
- **–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://github.com/ai-forever/Kandinsky-2.0
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, —Ç–æ–ª—å–∫–æ Flux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **–§–∞–π–ª:** `src/api/routes/image.ts` (—Å—Ç—Ä–æ–∫–∞ 172: –ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–æ –Ω–µ—Ç –≤—ã–∑–æ–≤–∞)

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (D1 / SQLite)

### ‚úÖ –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞
- **–§–∞–π–ª:** `src/api/database/schema.ts`
- **–¢–∞–±–ª–∏—Ü—ã:**
  - `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –±–∞–ª–∞–Ω—Å, —Ç–∞—Ä–∏—Ñ—ã
  - `generations` - –∏—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
  - `giftCodes` - –ø—Ä–æ–º–æ–∫–æ–¥—ã
  - `expenses` - —Ä–∞—Å—Ö–æ–¥—ã (–¥–ª—è –∞–¥–º–∏–Ω–∞)
  - `payments` - –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ Lava

### ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–ß—Ç–æ –Ω—É–∂–Ω–æ:**
  1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å D1 database –≤ Cloudflare Workers
  2. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage –≤ –ë–î
  3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- **–§–∞–π–ª—ã —Å TODO:**
  - `src/api/routes/webhook.ts` (—Å—Ç—Ä–æ–∫–∏ 94-117)
  - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `localStorage` –≤–º–µ—Å—Ç–æ –ë–î

---

## üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–†–æ—É—Ç:** `/admin`
- **–ú–µ—Ö–∞–Ω–∏–∑–º –≤—Ö–æ–¥–∞:** Secret knock (5 –∫–ª–∏–∫–æ–≤) ‚Üí PIN modal (PIN: `7777`)
- **–§–∞–π–ª:** `src/web/pages/admin.tsx`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤
  - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `ADMIN_EMAIL` –≤ `.env`
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º
- **–§–∞–π–ª:** `.env.example` - –Ω–µ—Ç `ADMIN_EMAIL`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ `src/web/pages/admin.tsx`:
  ```typescript
  const ADMIN_EMAIL = env.ADMIN_EMAIL || "your-email@example.com"
  // –ü—Ä–æ–≤–µ—Ä–∫–∞: if (user?.email !== ADMIN_EMAIL) return <Unauthorized />
  ```

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –º–æ–¥—É–ª—è–º

### 1. –ß–∞—Ç (/chat) - üü¢ 85%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ `streamText` (ai-sdk)
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä: OpenRouter (AI Gateway)
- ‚úÖ –ú–æ–¥–µ–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã: DeepSeek R1, GPT-4o mini, GPT-4o, Claude 3.5 Sonnet, o1
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage

**–ß—Ç–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**
- ‚ö†Ô∏è –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ D1 database (—Ç–æ–ª—å–∫–æ localStorage)
- ‚ö†Ô∏è –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏:**
- `AI_GATEWAY_API_KEY` –∏–ª–∏ `OPENROUTER_API_KEY` ‚úÖ (–Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∫–ª—é—á)

**–§–∞–π–ª—ã:**
- `src/api/routes/chat.ts` ‚úÖ –ì–æ—Ç–æ–≤
- `src/web/components/chat-interface.tsx` ‚úÖ –ì–æ—Ç–æ–≤

---

### 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (/images) - üü¢ 90%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã –∫ OpenRouter
- ‚úÖ Flux.1-schnell –¥–ª—è text-to-image
- ‚úÖ Gemini 2.0 Flash –¥–ª—è image-to-image
- ‚úÖ Nana Banana (niji-v6) —á–µ—Ä–µ–∑ OpenRouter
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ß—Ç–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**
- ‚ö†Ô∏è Kandinsky 3.1 –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ)
- ‚ö†Ô∏è –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏:**
- `OPENROUTER_API_KEY` ‚úÖ (–Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∫–ª—é—á)

**–§–∞–π–ª—ã:**
- `src/api/routes/image.ts` ‚úÖ –ì–æ—Ç–æ–≤
- `src/web/components/image-studio.tsx` ‚úÖ –ì–æ—Ç–æ–≤

---

### 3. –í–∏–¥–µ–æ (/video) - üü° 60%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Replicate –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
- ‚úÖ Text-to-Video –∏ Image-to-Video
- ‚úÖ Portrait Animation (Bring Photos to Life)

**–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–æ–π:**
- ‚ùå **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç sample videos** –∫–æ–≥–¥–∞ Replicate API Token –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå Kling AI –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Ç–æ–ª—å–∫–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ)
- ‚ùå Fallback –Ω–∞ Google sample videos

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏:**
- `REPLICATE_API_TOKEN` ‚ùå (–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
- `KLING_AI_API_KEY` ‚ùå (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–§–∞–π–ª—ã:**
- `src/api/routes/video.ts` ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω
- `src/web/components/motion-lab.tsx` ‚úÖ –ì–æ—Ç–æ–≤

**Fallback URLs (—Å—Ç—Ä–æ–∫–∏ 132-143):**
```typescript
const SAMPLE_VIDEOS = [
  "https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
  // ... –¥—Ä—É–≥–∏–µ sample videos
]
```

---

### 4. –ê—É–¥–∏–æ (/audio) - üî¥ 30%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Replicate MusicGen –≥–æ—Ç–æ–≤
- ‚úÖ Hugging Face TTS –≥–æ—Ç–æ–≤
- ‚úÖ Voice cloning –≥–æ—Ç–æ–≤

**–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–æ–π:**
- ‚ùå **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥–ª—É—à–∫–∞** - –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ API
- ‚ùå `handleGenerate` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `setTimeout(3000)` –≤–º–µ—Å—Ç–æ API
- ‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `/sample-audio.mp3`

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```typescript
// src/web/components/audio-studio.tsx:469
// TODO: replace with real API call
await new Promise(resolve => setTimeout(resolve, 3000));
audioUrl: "/sample-audio.mp3", // TODO: replace with actual URL from API
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏:**
- `REPLICATE_API_TOKEN` ‚ùå (–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
- `HUGGINGFACE_API_KEY` ‚ö†Ô∏è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª—ã:**
- `src/api/routes/audio.ts` ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- `src/web/components/audio-studio.tsx` ‚ùå –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ó–∞–º–µ–Ω–∏—Ç—å `setTimeout` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ `/api/audio/music` –∏–ª–∏ `/api/audio/tts`
2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç API
3. –£–±—Ä–∞—Ç—å sample audio fallback

---

### 5. –ê–≤–∞—Ç–∞—Ä—ã (/avatars) - üü° 70%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (FormData)
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç –≥–æ—Ç–æ–≤
- ‚úÖ Replicate SadTalker –≥–æ—Ç–æ–≤

**–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–æ–π:**
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç sample videos –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Replicate —Ç–æ–∫–µ–Ω–∞
- ‚ö†Ô∏è –ú–æ–¥–µ–ª—å –≤–µ—Ä—Å–∏—è - placeholder (—Å—Ç—Ä–æ–∫–∞ 74)

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏:**
- `REPLICATE_API_TOKEN` ‚ùå (–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)

**–§–∞–π–ª—ã:**
- `src/api/routes/avatar.ts` ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω
- `src/web/components/avatar-studio.tsx` ‚úÖ –ì–æ—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–æ–¥–µ–ª—å—é (—Å—Ç—Ä–æ–∫–∞ 74):**
```typescript
version: "cjwbw/sadtalker:4c1b1e9e87e5e2c8ad7f3f4e2d1c3b2a1d0e9f8a7b6c5d4e3f2a1b0c9d8e7f6", // Placeholder
```

---

### 6. –ò—Å—Ç–æ—Ä–∏—è (/history) - üü¢ 95%

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage (`synapse_history`)
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –í—Å–µ, –ß–∞—Ç—ã, –ì–∞–ª–µ—Ä–µ—è, –ú–µ–¥–∏–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ/–Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ LightBox –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ Play –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ

**–ß—Ç–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ localStorage, –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –ë–î
- ‚ö†Ô∏è –õ–∏–º–∏—Ç 100 –∑–∞–ø–∏—Å–µ–π (—Å—Ç—Ä–æ–∫–∞ 61)

**–§–∞–π–ª—ã:**
- `src/web/components/placeholder-pages.tsx` ‚úÖ –ì–æ—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å D1 database –¥–ª—è –∫—Ä–æ—Å—Å-–¥–µ–≤–∞–π—Å –¥–æ—Å—Ç—É–ø–∞

---

## üí≥ –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Lava

### ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ
1. **Webhook —ç–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/webhook/lava`
   - ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π

2. **–°—Ö–µ–º–∞ –ë–î:** –¢–∞–±–ª–∏—Ü–∞ `payments` –≥–æ—Ç–æ–≤–∞

3. **UI:** Paywall modal –≥–æ—Ç–æ–≤ —Å –ø–∞–∫–µ—Ç–∞–º–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤

### ‚ùå –ß—Ç–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤:**
   - ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Lava Business API
   - ‚ùå –ù–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
   - **–§–∞–π–ª:** `src/web/components/paywall-modal.tsx:312` - –∑–∞–≥–ª—É—à–∫–∞

2. **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤:**
   - ‚ùå Webhook –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç –∫—Ä–µ–¥–∏—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 94-117 –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã)
   - ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å D1 database

3. **–ö—Ä–∏–ø—Ç–æ-–º–æ—Å—Ç:**
   - ‚ùå –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ø–∏—Å–∞–Ω–∏–µ —Å –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∞ Lava

### üìù –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Lava

#### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Lava Business
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ https://lava.ru/business
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ò–ü
3. –ü–æ–ª—É—á–∏—Ç—å `LAVA_SECRET_KEY` –∏ `LAVA_SHOP_ID`

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤
**–§–∞–π–ª:** `src/api/routes/payment.ts` (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π)

```typescript
// POST /api/payment/create
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: packageId, userId
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: invoiceUrl –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞

const response = await fetch("https://api.lava.ru/business/invoice/create", {
  method: "POST",
  headers: {
    "Authorization": `Bearer ${env.LAVA_SECRET_KEY}`,
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    sum: creditPackage.price,
    orderId: generateOrderId(),
    customFields: {
      user_id: userId,
      package_id: packageId,
    },
    successUrl: `${env.VITE_BASE_URL}/payment/success`,
    failUrl: `${env.VITE_BASE_URL}/payment/fail`,
  }),
});
```

#### –®–∞–≥ 3: Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
**–§–∞–π–ª:** `src/api/routes/webhook.ts` (—Å—Ç—Ä–æ–∫–∏ 94-117)

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
```typescript
// 1. –î–æ–±–∞–≤–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
const db = c.env.DB;
await db.update(users)
  .set({ creditBalance: sql`credit_balance + ${creditPackage.credits}` })
  .where(eq(users.id, userId))

// 2. –ó–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞—Ç–µ–∂ –≤ –∏—Å—Ç–æ—Ä–∏—é
await db.insert(payments).values({
  id: crypto.randomUUID(),
  userId,
  amount: creditPackage.price,
  credits: creditPackage.credits,
  status: 'completed',
  lavaOrderId: order_id,
  packageId,
  createdAt: new Date()
})
```

#### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å Paywall Modal
**–§–∞–π–ª:** `src/web/components/paywall-modal.tsx:312`

–ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤:
```typescript
const response = await fetch("/api/payment/create", {
  method: "POST",
  body: JSON.stringify({ packageId, userId: getUserId() }),
});
const { invoiceUrl } = await response.json();
window.location.href = invoiceUrl; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è D1

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞ (`src/api/database/schema.ts`)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã (`src/api/migrations/0001_init.sql`)
- ‚ùå **–ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω–∞** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å D1 –≤ Cloudflare Workers:**
   ```typescript
   // wrangler.toml –∏–ª–∏ —á–µ—Ä–µ–∑ Cloudflare Dashboard
   [[d1_databases]]
   binding = "DB"
   database_name = "synapse-db"
   database_id = "your-database-id"
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î:**
   - `getUser(userId)` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `updateUserCredits(userId, credits)` - –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
   - `saveGeneration(generation)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
   - `getUserHistory(userId, type?)` - –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage:**
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏—Å—Ç–æ—Ä–∏–∏
   - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –±–∞–ª–∞–Ω—Å–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤

---

## üìù –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–¥–ª—è –∑–∞–ø—É—Å–∫–∞)

1. **–ê—É–¥–∏–æ –º–æ–¥—É–ª—å** - –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã
   - –§–∞–π–ª: `src/web/components/audio-studio.tsx:469`
   - –ó–∞–º–µ–Ω–∏—Ç—å `setTimeout` –Ω–∞ `fetch("/api/audio/music")` –∏–ª–∏ `/api/audio/tts`

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å API –∫–ª—é—á–∏:**
   - `OPENROUTER_API_KEY` - –¥–ª—è —á–∞—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - `REPLICATE_API_TOKEN` - –¥–ª—è –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –∞–≤–∞—Ç–∞—Ä–æ–≤

3. **Lava –ø–ª–∞—Ç–µ–∂–∏:**
   - –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/payment/create`
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å webhook –∫ –ë–î
   - –û–±–Ω–æ–≤–∏—Ç—å Paywall Modal

### üü† –í–∞–∂–Ω–æ (–¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö D1:**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å D1 database
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage

5. **–í–∏–¥–µ–æ –º–æ–¥—É–ª—å:**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å Replicate API Token
   - –£–±—Ä–∞—Ç—å fallback –Ω–∞ sample videos
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Kling AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

6. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `ADMIN_EMAIL`
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (—É–ª—É—á—à–µ–Ω–∏—è)

7. **Kandinsky 3.1:**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Kandinsky

8. **–ò—Å—Ç–æ—Ä–∏—è:**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î –¥–ª—è –∫—Ä–æ—Å—Å-–¥–µ–≤–∞–π—Å –¥–æ—Å—Ç—É–ø–∞
   - –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π

---

## üîë –°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö API-–∫–ª—é—á–µ–π

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (–¥–ª—è –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

1. **OpenRouter API Key**
   - –ì–¥–µ: https://openrouter.ai/keys
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `OPENROUTER_API_KEY` –∏–ª–∏ `AI_GATEWAY_API_KEY`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ß–∞—Ç, –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤

2. **Replicate API Token**
   - –ì–¥–µ: https://replicate.com/account/api-tokens
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `REPLICATE_API_TOKEN`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –í–∏–¥–µ–æ, –ê—É–¥–∏–æ, –ê–≤–∞—Ç–∞—Ä—ã, Enhance
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω

### –î–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

3. **Lava Business Secret Key**
   - –ì–¥–µ: https://lava.ru/business (–ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ò–ü)
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `LAVA_SECRET_KEY`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
   - –°—Ç–∞—Ç—É—Å: ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

4. **Lava Shop ID**
   - –ì–¥–µ: https://lava.ru/business
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `LAVA_SHOP_ID`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
   - –°—Ç–∞—Ç—É—Å: ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

5. **Hugging Face API Key**
   - –ì–¥–µ: https://huggingface.co/settings/tokens
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `HUGGINGFACE_API_KEY` –∏–ª–∏ `HF_API_TOKEN`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è TTS –æ–∑–≤—É—á–∫–∞
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ï—Å—Ç—å fallback –Ω–∞ Replicate

6. **Kling AI API Key** (–±—É–¥—É—â–µ–µ)
   - –ì–¥–µ: https://www.klingai.com
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `KLING_AI_API_KEY`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ü—Ä–µ–º–∏—É–º –≤–∏–¥–µ–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
   - –°—Ç–∞—Ç—É—Å: ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
1. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å `OPENROUTER_API_KEY` –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env`
2. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å `REPLICATE_API_TOKEN` –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env`
3. ‚ùå **–ö–†–ò–¢–ò–ß–ù–û:** –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –≤ Audio Studio –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã
4. ‚ö†Ô∏è –ü–æ–¥–∫–ª—é—á–∏—Ç—å D1 database –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Lava –ø–ª–∞—Ç–µ–∂–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤ + webhook)
6. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏ –∫ –ë–î –≤–º–µ—Å—Ç–æ localStorage
7. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Kandinsky 3.1 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
8. –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∏—Å—Ç–æ—Ä–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
9. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Kling AI –¥–ª—è –ø—Ä–µ–º–∏—É–º –≤–∏–¥–µ–æ
10. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è API –∫–ª—é—á–µ–π, –º—ã –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–º –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å, –Ω–∞—á–∏–Ω–∞—è —Å –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö (–ê—É–¥–∏–æ ‚Üí –í–∏–¥–µ–æ ‚Üí Lava –ø–ª–∞—Ç–µ–∂–∏).
